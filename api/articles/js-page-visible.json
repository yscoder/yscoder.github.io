{"title":"HTML5页面可见性改变事件","slug":"js-page-visible","date":"2015-06-15T03:01:53.000Z","updated":"2016-08-15T13:28:56.417Z","comments":true,"path":"api/articles/js-page-visible.json","excerpt":"<p>通过该事件可以判断当前页面对于用户的可见性，即返回用户当前浏览的页面或标签的状态变化。<br>","content":"<p>通过该事件可以判断当前页面对于用户的可见性，即返回用户当前浏览的页面或标签的状态变化。<br><a id=\"more\"></a></p>\n<h2 id=\"visibilitychange（页面可见性改变事件）\"><a href=\"#visibilitychange（页面可见性改变事件）\" class=\"headerlink\" title=\"visibilitychange（页面可见性改变事件）\"></a>visibilitychange（页面可见性改变事件）</h2><p>该事件属于HTML5新API，兼容性IE10+，以及其他现代浏览器等。</p>\n<p>以下是一个简单的案例，当用户离开当前页面时改变页面标题。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> pageVisible = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> title = <span class=\"string\">''</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> change = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">'visibilitychange'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> temp = <span class=\"keyword\">this</span>.title;</div><div class=\"line\">            <span class=\"keyword\">this</span>.title = title;</div><div class=\"line\">            title = temp;</div><div class=\"line\">        &#125;)</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        init: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">tit</span>)</span>&#123;</div><div class=\"line\">            title = tit || <span class=\"string\">'好好学习，天天向上！'</span>;</div><div class=\"line\">            change();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\">pageVisible.init();</div></pre></td></tr></table></figure>\n<p>此外，还可以在事件内对页面可见性属性判断可见性状态。</p>\n<blockquote>\n<p>document.hidden: Boolean值，表示当前页面可见还是不可见。</p>\n</blockquote>\n<p><strong>适用场景，如：</strong></p>\n<p>1.用户离开媒体页面停止播放媒体；<br>2.用户离开游戏页面暂停游戏；<br>3.等等……</p>\n","categories":[],"tags":[{"name":"html5","path":"api/tags/html5.json"},{"name":"javascript","path":"api/tags/javascript.json"}]}