{"title":"WebpackæŒ‰éœ€æ‰“åŒ…Lodashçš„å‡ ç§æ–¹å¼","slug":"webpack-use-lodash","date":"2016-12-16T17:41:21.000Z","updated":"2017-01-12T12:20:28.439Z","comments":true,"path":"api/articles/webpack-use-lodash.json","excerpt":"<p>åœ¨æ•°æ®æ“ä½œæ—¶ï¼ŒLodash å°±æ˜¯æˆ‘çš„å¼¹è¯åº“ï¼Œä¸ç®¡é‡åˆ°å¤šå¤æ‚çš„æ•°æ®ç»“æ„éƒ½èƒ½ç”¨ä¸€äº›å‡½æ•°è½»æ¾æ‹†è§£ã€‚</p><p>ES6 ä¸­ä¹Ÿæ–°å¢äº†è¯¸å¤šæ–°çš„å¯¹è±¡å‡½æ•°ï¼Œä¸€äº›ç®€å•çš„é¡¹ç›®ä¸­ ES6 å°±è¶³å¤Ÿä½¿ç”¨äº†ï¼Œä½†è¿˜æ˜¯ä¼šæœ‰ä¾‹å¤–çš„æƒ…å†µå¼•ç”¨äº†å°‘æ•°çš„ Lodash å‡½æ•°ã€‚ä¸€ä¸ªå®Œæ•´çš„ Lodash åº“ï¼Œå³ä½¿æ˜¯å‹ç¼©åï¼Œç°æœ€æ–°ç‰ˆæœ¬ä¹Ÿæœ‰ <code>71k</code> çš„ä½“ç§¯ã€‚ä¸èƒ½ä¸ºäº†åƒä¸€å£é¥­è€Œä¹°ä¸‹ä¸€ä¸ªé¥­åº—å•Šã€‚</p><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®å·²ç»æœ‰å¾ˆå¤šå¯é€‰æ–¹æ¡ˆäº†ã€‚<br>","content":"<p>åœ¨æ•°æ®æ“ä½œæ—¶ï¼ŒLodash å°±æ˜¯æˆ‘çš„å¼¹è¯åº“ï¼Œä¸ç®¡é‡åˆ°å¤šå¤æ‚çš„æ•°æ®ç»“æ„éƒ½èƒ½ç”¨ä¸€äº›å‡½æ•°è½»æ¾æ‹†è§£ã€‚</p><p>ES6 ä¸­ä¹Ÿæ–°å¢äº†è¯¸å¤šæ–°çš„å¯¹è±¡å‡½æ•°ï¼Œä¸€äº›ç®€å•çš„é¡¹ç›®ä¸­ ES6 å°±è¶³å¤Ÿä½¿ç”¨äº†ï¼Œä½†è¿˜æ˜¯ä¼šæœ‰ä¾‹å¤–çš„æƒ…å†µå¼•ç”¨äº†å°‘æ•°çš„ Lodash å‡½æ•°ã€‚ä¸€ä¸ªå®Œæ•´çš„ Lodash åº“ï¼Œå³ä½¿æ˜¯å‹ç¼©åï¼Œç°æœ€æ–°ç‰ˆæœ¬ä¹Ÿæœ‰ <code>71k</code> çš„ä½“ç§¯ã€‚ä¸èƒ½ä¸ºäº†åƒä¸€å£é¥­è€Œä¹°ä¸‹ä¸€ä¸ªé¥­åº—å•Šã€‚</p><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®å·²ç»æœ‰å¾ˆå¤šå¯é€‰æ–¹æ¡ˆäº†ã€‚<br><a id=\"more\"></a></p><h2 id=\"å‡½æ•°æ¨¡å—\"><a href=\"#å‡½æ•°æ¨¡å—\" class=\"headerlink\" title=\"å‡½æ•°æ¨¡å—\"></a>å‡½æ•°æ¨¡å—</h2><p>Lodash ä¸­çš„æ¯ä¸ªå‡½æ•°åœ¨ NPM éƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„å‘å¸ƒæ¨¡å—ã€‚<a href=\"https://www.npmjs.com/search?q=lodash\" target=\"_blank\" rel=\"external\">NPM: results for â€˜lodashâ€™</a><br>å‡å¦‚ä½ åªéœ€è¦ä½¿ç”¨<code>_.isEqual</code>ï¼Œé‚£ä¹ˆä½ åªéœ€è¦å®‰è£…<code>lodash.isequal</code>æ¨¡å—ï¼Œç„¶åæŒ‰ä»¥ä¸‹æ–¹å¼å¼•ç”¨ã€‚</p><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> isEqual = <span class=\"built_in\">require</span>(<span class=\"string\">'lodash.isequal'</span>)</div><div class=\"line\"><span class=\"comment\">// or ES6</span></div><div class=\"line\"><span class=\"keyword\">import</span> isEqual <span class=\"keyword\">from</span> <span class=\"string\">'lodash.isequal'</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">isEqual([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]) <span class=\"comment\">// true</span></div></pre></td></tr></table></figure><h2 id=\"å…¨è·¯å¾„å¼•ç”¨\"><a href=\"#å…¨è·¯å¾„å¼•ç”¨\" class=\"headerlink\" title=\"å…¨è·¯å¾„å¼•ç”¨\"></a>å…¨è·¯å¾„å¼•ç”¨</h2><p>åœ¨ä½ å®Œæ•´å®‰è£… Lodash åï¼Œå¯ä»¥æŒ‰<code>lodash/å‡½æ•°å</code>çš„æ ¼å¼å•ç‹¬å¼•å…¥éœ€è¦çš„å‡½æ•°æ¨¡å—ã€‚</p><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> difference = <span class=\"built_in\">require</span>(<span class=\"string\">'lodash/difference'</span>)</div><div class=\"line\"><span class=\"comment\">// or ES6</span></div><div class=\"line\"><span class=\"keyword\">import</span> difference <span class=\"keyword\">from</span> <span class=\"string\">'lodash/difference'</span></div><div class=\"line\"></div><div class=\"line\">difference([<span class=\"number\">1</span>, <span class=\"number\">2</span>], [<span class=\"number\">1</span>, <span class=\"number\">3</span>])  <span class=\"comment\">// [2]</span></div></pre></td></tr></table></figure><h2 id=\"ä½¿ç”¨æ’ä»¶ä¼˜åŒ–\"><a href=\"#ä½¿ç”¨æ’ä»¶ä¼˜åŒ–\" class=\"headerlink\" title=\"ä½¿ç”¨æ’ä»¶ä¼˜åŒ–\"></a>ä½¿ç”¨æ’ä»¶ä¼˜åŒ–</h2><p>åœ¨ç®€å•åœºæ™¯ä¸‹ï¼Œä»¥ä¸Šä¸¤ç§æ–¹å¼è¶³ä»¥è§£å†³é—®é¢˜ã€‚<br>è€Œé‡åˆ°å¤æ‚çš„æ•°æ®å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ä¸å¾—ä¸åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¼•å…¥å¤šä¸ª Lodash å‡½æ•°ï¼Œè¿™æ ·å°±éœ€è¦åœ¨æ–‡ä»¶ä¸­å†™å¤šä¸ª<code>require</code>æˆ–<code>import</code>ç›¸å…³å‡½æ•°ã€‚</p><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> remove <span class=\"keyword\">from</span> <span class=\"string\">'lodash/remove'</span></div><div class=\"line\"><span class=\"keyword\">import</span> uniq <span class=\"keyword\">from</span> <span class=\"string\">'lodash/uniq'</span></div><div class=\"line\"><span class=\"keyword\">import</span> invokeMap <span class=\"keyword\">from</span> <span class=\"string\">'lodash/invokeMap'</span></div><div class=\"line\"><span class=\"keyword\">import</span> sortBy <span class=\"keyword\">from</span> <span class=\"string\">'lodash/sortBy'</span></div><div class=\"line\"><span class=\"comment\">// more...</span></div></pre></td></tr></table></figure><p>æ­£å†™åˆ°å…³é”®å¤„å´å› ä¸ºå¼•å…¥ä¸€ä¸ªå‡½æ•°è¦æ‹‰åˆ°æ–‡ä»¶å¤´éƒ¨å»å®šä¹‰å¼•ç”¨è€Œæ‰“ä¹±äº†æ€è·¯ï¼Œå¾ˆä¸çˆ½ï¼</p><p>äºæ˜¯æˆ‘æœºæ™ºçš„åˆ° Github å»æœç´¢äº†<code>webpack</code>å’Œ<code>lodash</code>ä¸¤ä¸ªå…³é”®è¯çš„ç»„åˆï¼Œæ’åœ¨é¦–ä½çš„ <a href=\"https://github.com/lodash/lodash-webpack-plugin\" target=\"_blank\" rel=\"external\">lodash-webpack-plugin</a> å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿã€‚</p><p>ä½¿ç”¨æ—¶éœ€è¦ä»¥ä¸‹æ¨¡å—ï¼Œå…¶å®é™¤äº†å‰ä¸¤ä¸ªå‰©ä¸‹çš„ä¸€èˆ¬éƒ½å·²å®‰è£…äº†ï¼š</p><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ npm i -S lodash-webpack-plugin babel-plugin-lodash babel-core babel-loader babel-preset-es2015 webpack</div></pre></td></tr></table></figure><p><strong>é…ç½®ï¼š</strong></p><figure class=\"highlight js\"><figcaption><span>webpack.config.js</span></figcaption><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> LodashModuleReplacementPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'lodash-webpack-plugin'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</div><div class=\"line\">  <span class=\"attr\">module</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">loaders</span>: [&#123;</div><div class=\"line\">      <span class=\"attr\">loader</span>: <span class=\"string\">'babel'</span>,</div><div class=\"line\">      <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</div><div class=\"line\">      <span class=\"attr\">exclude</span>: <span class=\"regexp\">/node_modules/</span>,</div><div class=\"line\">      <span class=\"attr\">query</span>: &#123;</div><div class=\"line\">        <span class=\"attr\">plugins</span>: [<span class=\"string\">'transform-runtime'</span>, <span class=\"string\">'lodash'</span>],</div><div class=\"line\">        <span class=\"attr\">presets</span>: [<span class=\"string\">'es2015'</span>]</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;]</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">plugins</span>: [</div><div class=\"line\">    <span class=\"keyword\">new</span> LodashModuleReplacementPlugin,</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.OccurrenceOrderPlugin,</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin</div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure><p>å…¶ä¸­<code>babel-plugin-lodash</code>çš„é…ç½®ï¼Œä¹Ÿå°±æ˜¯<code>plugins: [&#39;lodash&#39;]</code>ï¼Œå¹¶ä¸æ˜¯ä¸€å®šè¦åœ¨<code>loaders</code>ä¸­ï¼Œä¹Ÿå¯ä»¥å•ç‹¬å®šä¹‰<code>babel</code>ã€‚</p><figure class=\"highlight js\"><figcaption><span>webpack.config.js</span></figcaption><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> LodashModuleReplacementPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'lodash-webpack-plugin'</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</div><div class=\"line\">  <span class=\"attr\">module</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">loaders</span>: [&#123;</div><div class=\"line\">      <span class=\"attr\">loader</span>: <span class=\"string\">'babel'</span>,</div><div class=\"line\">      <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</div><div class=\"line\">      <span class=\"attr\">exclude</span>: <span class=\"regexp\">/node_modules/</span></div><div class=\"line\">    &#125;]</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">babel</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">presets</span>: [<span class=\"string\">'es2015'</span>],</div><div class=\"line\">    <span class=\"attr\">plugins</span>: [<span class=\"string\">'transform-runtime'</span>, <span class=\"string\">'lodash'</span>]</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">plugins</span>: [</div><div class=\"line\">    <span class=\"keyword\">new</span> LodashModuleReplacementPlugin,</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.OccurrenceOrderPlugin,</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin</div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure><p>åˆæˆ–è€…æ˜¯<code>.babelrc</code>æ–‡ä»¶ä¸­ã€‚</p><p>ä»¥ä¸Šå·¥ä½œå®Œæˆäº†ï¼Œåœ¨æ¯ä¸ªä½ éœ€è¦ä½¿ç”¨ lodash å‡½æ•°çš„æ–‡ä»¶ä¸­åªéœ€è¦å¼•ç”¨ä¸€æ¬¡ lodashï¼Œå³å¯è°ƒç”¨ä»»æ„å‡½æ•°è€Œä¸ä¼šé€ æˆå®Œå…¨æ‰“åŒ…ã€‚</p><figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span></div><div class=\"line\"></div><div class=\"line\">_.add(<span class=\"number\">1</span>, <span class=\"number\">2</span>)  <span class=\"comment\">// æ‰“åŒ…æ—¶åªä¼šå¼•å…¥è¿™ä¸€ä¸ªå‡½æ•°æ¨¡å—</span></div></pre></td></tr></table></figure><h2 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"End\"></a>End</h2><p>ä»¥ä¸Šå³æ˜¯æˆ‘ç›®å‰æ‰€çŸ¥é“çš„å‡ ç§æ–¹å¼ï¼Œå¦‚æœå“ªä½æœ‹å‹æœ‰æ›´å¥½çš„æ–¹å¼ï¼ˆæ¯”å¦‚åªéœ€è¦å…¨å±€å¼•å…¥ä¸€æ¬¡ï¼‰ï¼Œè¯·ä¸€å®šåˆ†äº«ä¸æˆ‘ï¼ğŸ˜‹</p>","categories":[],"tags":[{"name":"Webpack","path":"api/tags/Webpack.json"},{"name":"Lodash","path":"api/tags/Lodash.json"}]}