{"title":"博客搬迁记 - 从WordPress到Hexo","slug":"wordpress-to-hexo","date":"2015-05-13T01:50:02.000Z","updated":"2016-08-15T13:28:56.417Z","comments":true,"path":"api/articles/wordpress-to-hexo.json","excerpt":"<p>今天早上打开电脑第一件事就是把pages绑定了域名，从此便可以使用<code>http://imys.net</code>进行访问了。</p>\n<p>至此已经折腾的差不多了，在此记录下搬迁过程中遇到的一些问题及解决办法。<br>","content":"<p>今天早上打开电脑第一件事就是把pages绑定了域名，从此便可以使用<code>http://imys.net</code>进行访问了。</p>\n<p>至此已经折腾的差不多了，在此记录下搬迁过程中遇到的一些问题及解决办法。<br><a id=\"more\"></a></p>\n<h2 id=\"Hexo3本地部署\"><a href=\"#Hexo3本地部署\" class=\"headerlink\" title=\"Hexo3本地部署\"></a>Hexo3本地部署</h2><p>现在node下安装的hexo一般都是最新版本，网上搜索到的一些教程不乏是老版本的，要特别留意。</p>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><ul>\n<li><a href=\"http://forsweet.github.io/2015/04/20/%E7%94%A8Hexo%E6%90%AD%E5%BB%BAGithub%E5%8D%9A%E5%AE%A2/\" target=\"_blank\" rel=\"external\">用Hexo 3 搭建github blog</a></li>\n<li><a href=\"http://www.jianshu.com/p/73779eacb494\" target=\"_blank\" rel=\"external\">Hexo 3.0 静态博客使用指南</a></li>\n</ul>\n<p>以上两篇文章应该能使你顺利的在<code>http://localhost:4000/</code>看到自己的新博客，并且你也熟悉了Hexo的常用命令。</p>\n<h3 id=\"Hexo无法解析模板文件\"><a href=\"#Hexo无法解析模板文件\" class=\"headerlink\" title=\"Hexo无法解析模板文件\"></a>Hexo无法解析模板文件</h3><p>本地预览页面显示：</p>\n<pre><code>&lt;%- partial(&apos;_partial/head&apos;) %&gt;\n&lt;%- partial(&apos;_partial/header&apos;) %&gt;\n&lt;%- body %&gt;\n&lt;% if (theme.sidebar &amp;&amp; theme.sidebar !== &apos;bottom&apos;){ %&gt; &lt;%- partial(&apos;_partial/sidebar&apos;) %&gt; &lt;% } %&gt;\n&lt;%- partial(&apos;_partial/footer&apos;) %&gt;\n&lt;%- partial(&apos;_partial/mobile-nav&apos;) %&gt; &lt;%- partial(&apos;_partial/after-footer&apos;) %&gt;\n</code></pre><p>在工程目录执行下面3个命令，高版本的hexo移除默认的ejs。</p>\n<pre><code>$ npm install hexo-renderer-ejs --save\n$ npm install hexo-renderer-stylus --save\n$ npm install hexo-renderer-marked --save\n</code></pre><h2 id=\"上传到GitCafe\"><a href=\"#上传到GitCafe\" class=\"headerlink\" title=\"上传到GitCafe\"></a>上传到GitCafe</h2><ul>\n<li><a href=\"http://www.sumrday.com/2014/09-18-Hello-Hexo.html\" target=\"_blank\" rel=\"external\">注册GitCafe创建Page项目</a></li>\n<li><a href=\"https://gitcafe.com/GitCafe/Help/wiki/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85%E5%92%8C%E8%AE%BE%E7%BD%AE%20Git\" target=\"_blank\" rel=\"external\">安装和设置 Git</a></li>\n</ul>\n<p>以上两篇内容结合着看，不过对第一次操作这些的人来说可能会遇到一些问题。</p>\n<h3 id=\"生成SSH\"><a href=\"#生成SSH\" class=\"headerlink\" title=\"生成SSH\"></a>生成SSH</h3><p>当命令窗口出现以下信息时，需要你输入<code>passphrase</code>口令。不过在我操作时输入口令的话是无法生成成功的，直接按<code>enter</code>即可。</p>\n<pre><code>Enter passphrase (empty for no passphrase):\n</code></pre><h3 id=\"设置git\"><a href=\"#设置git\" class=\"headerlink\" title=\"设置git\"></a>设置git</h3><p>第一次在本地设置git时，需设置用户标识。</p>\n<pre><code>$ git config --global user.name &quot;yourname&quot;                   //gitcafe上的用户名\n$ git config --global user.email &quot;yourmaill@yourmaili.com&quot;   //填写自己的邮箱\n</code></pre><h3 id=\"设置本地gitcafe-pages版本库\"><a href=\"#设置本地gitcafe-pages版本库\" class=\"headerlink\" title=\"设置本地gitcafe-pages版本库\"></a>设置本地gitcafe-pages版本库</h3><ol>\n<li>GitBash进入本地Hexo目录</li>\n<li><code>git checkout -b gitcafe-pages</code> 创建Gitcafe-Pages分支，并切换到该分支。</li>\n<li><code>git add .</code> （.）点表示当前目录下的所有内容，交给git管理，也就是提交到了git的本地仓库。</li>\n</ol>\n<h3 id=\"上传到gitcafe\"><a href=\"#上传到gitcafe\" class=\"headerlink\" title=\"上传到gitcafe\"></a>上传到gitcafe</h3><p><strong>修改hexo配置文件，即config.yml，如下配置：</strong></p>\n<pre><code>deploy:\n  type: git\n  repository: git@gitcafe.com:yourname/yourname.git\n  branch: gitcafe-pages\n</code></pre><p>yourname 修改成你的用户名，如我的是：<code>git@gitcafe.com:justgo/justgo.git</code></p>\n<p>保存后直接在<strong>GitBash</strong>中<code>hexo g &amp;&amp; hexo d</code>上传即可（我在这一步折腾了很久，在cmd下运行<code>hexo d</code>命令会出错）。</p>\n<p>稍等片刻，打开 <code>http://youname/gitcafe.io</code> 便可以看到自己的博客了。</p>\n<h2 id=\"WordPress文章迁移\"><a href=\"#WordPress文章迁移\" class=\"headerlink\" title=\"WordPress文章迁移\"></a>WordPress文章迁移</h2><p>WordPress 后台可以直接导出wordpress.xml文件，把这个文件放入你的本地Hexo目录下，然后安装一个插件可以直接生成每篇文章的Markdown文件。</p>\n<pre><code>npm install hexo-migrator-wordpress --save    //安装插件\n\nhexo migrate wordpress wordpress.xml          //生成Markdown\n</code></pre><p>生成后的文件稍微修改一下格式就可以上传了。</p>\n<p>庆幸的是我博客里的图片不多，不需要太多的链接修改。</p>\n<p>不过以后我也开始使用七牛存储了，免得以后搬迁麻烦。</p>\n<h2 id=\"Hexo配置优化\"><a href=\"#Hexo配置优化\" class=\"headerlink\" title=\"Hexo配置优化\"></a>Hexo配置优化</h2><h3 id=\"参考-1\"><a href=\"#参考-1\" class=\"headerlink\" title=\"参考\"></a>参考</h3><ul>\n<li><a href=\"http://zipperary.com/2013/05/29/hexo-guide-3/\" target=\"_blank\" rel=\"external\">hexo博客的配置、使用</a></li>\n<li><a href=\"http://zipperary.com/2013/05/30/hexo-guide-4/\" target=\"_blank\" rel=\"external\">hexo博客的优化技巧</a></li>\n<li><a href=\"http://zipperary.com/2013/06/02/hexo-guide-5/\" target=\"_blank\" rel=\"external\">hexo博客的优化技巧续</a></li>\n<li><a href=\"http://lukang.me/2014/optimization-of-hexo.html\" target=\"_blank\" rel=\"external\">Hexo 优化与定制(一)</a></li>\n<li><a href=\"http://lukang.me/2015/optimization-of-hexo-2.html\" target=\"_blank\" rel=\"external\">Hexo 优化与定制(二)</a></li>\n</ul>\n<h3 id=\"无法开启RSS和sitemap\"><a href=\"#无法开启RSS和sitemap\" class=\"headerlink\" title=\"无法开启RSS和sitemap\"></a>无法开启RSS和sitemap</h3><p>打开<code>http://localhost:4000/atom.xml</code> 页面显示 <code>Cannot GET atom.xml</code>，<code>http://localhost:4000/sitemap.xml</code> 页面显示 <code>Cannot GET sitemap.xml</code>。</p>\n<p>这个问题困扰了我很长的时间，因为我的插件安装和配置都是照着<a href=\"http://hexo.io/plugins/\" target=\"_blank\" rel=\"external\">示例</a>分毫不差的进行的，可是google了几个小时都没解决！</p>\n<p>插件也重装更新了几次，想过重新初始化Hexo，怕会丢失原来的一些配置，最后在 <code>hexo/package.json</code> 中找到了原因。</p>\n<p>package.json：</p>\n<pre><code>{\n  &quot;name&quot;: &quot;hexo-site&quot;,\n  &quot;version&quot;: &quot;0.0.0&quot;,\n  &quot;private&quot;: true,\n  &quot;hexo&quot;: {\n    &quot;version&quot;: &quot;3.0.1&quot;\n  },\n  &quot;dependencies&quot;: {\n    &quot;hexo&quot;: &quot;^3.0.0&quot;,\n    &quot;hexo-admin&quot;: &quot;^0.3.0&quot;,\n    &quot;hexo-deployer-git&quot;: &quot;0.0.4&quot;,\n    &quot;hexo-generator-archive&quot;: &quot;^0.1.0&quot;,\n    &quot;hexo-generator-category&quot;: &quot;^0.1.0&quot;,\n    &quot;hexo-generator-index&quot;: &quot;^0.1.0&quot;,\n    &quot;hexo-generator-tag&quot;: &quot;^0.1.0&quot;,\n    &quot;hexo-generator-feed&quot;: &quot;^1.0.1&quot;,\n    &quot;hexo-generator-sitemap&quot;: &quot;^1.0.1&quot;,\n    &quot;hexo-migrator-wordpress&quot;: &quot;^0.1.2&quot;,\n    &quot;hexo-renderer-ejs&quot;: &quot;^0.1.0&quot;,\n    &quot;hexo-renderer-marked&quot;: &quot;^0.2.4&quot;,\n    &quot;hexo-renderer-stylus&quot;: &quot;^0.2.0&quot;,\n    &quot;hexo-server&quot;: &quot;^0.1.2&quot;\n  }\n}\n</code></pre><p>检查此文件中是否包括了<code>hexo-generator-tag</code>和<code>hexo-generator-sitemap</code>，没有的话添加一下。<br>插件版本号查看对应插件下的<code>package.json</code>文件，其他插件的类似问题应该也可以尝试这样解决。</p>\n","categories":[],"tags":[{"name":"Hexo","path":"api/tags/Hexo.json"},{"name":"WordPress","path":"api/tags/WordPress.json"},{"name":"gitcafe","path":"api/tags/gitcafe.json"}]}