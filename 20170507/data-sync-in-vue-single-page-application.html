<!DOCTYPE html><html><head><!-- Google Analytics --><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-87940530-1","auto"),ga("send","pageview");</script><script async src="https://www.google-analytics.com/analytics.js"></script><!-- End Google Analytics --><meta charset="utf-8"><meta name="google-site-verification" content="rlxpN--EBnMOLJnY1efTuwShQId3YX7A6RWkQEr0y9c"><link rel="canonical" href="http://imys.net/20170507/data-sync-in-vue-single-page-application.html"><title>Vueå•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥æ¢ç´¢ | Yusen&#39;s Blog | å­¦ä¹ å¼¯é“è¶…è½¦çš„æŠ€å·§ï¼</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#3F51B5"><meta name="keywords" content="Vue,Vuex,SPA,æ•°æ®æµ,æ•°æ®åŒæ­¥"><meta name="description" content="å•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥ï¼ŒVue å•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥ï¼ŒVuex æ•°æ®åŒæ­¥"><meta property="og:type" content="article"><meta property="og:title" content="Vueå•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥æ¢ç´¢"><meta property="og:url" content="http://imys.net/20170507/data-sync-in-vue-single-page-application.html"><meta property="og:site_name" content="Yusen's Blog"><meta property="og:description" content="å•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥ï¼ŒVue å•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥ï¼ŒVuex æ•°æ®åŒæ­¥"><meta property="og:image" content="http://7ximpj.com1.z0.glb.clouddn.com/vue-practice-in-complex-single-page-application-201757194432.jpg"><meta property="og:image" content="http://7ximpj.com1.z0.glb.clouddn.com/vue-practice-in-complex-single-page-application-20175720345.jpg"><meta property="og:image" content="http://7ximpj.com1.z0.glb.clouddn.com/vue-practice-in-complex-single-page-application-201757202023.jpg"><meta property="og:updated_time" content="2017-05-13T00:05:11.888Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Vueå•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥æ¢ç´¢"><meta name="twitter:description" content="å•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥ï¼ŒVue å•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥ï¼ŒVuex æ•°æ®åŒæ­¥"><meta name="twitter:image" content="http://7ximpj.com1.z0.glb.clouddn.com/vue-practice-in-complex-single-page-application-201757194432.jpg"><link rel="alternate" type="application/atom+xml" title="Yusen&#39;s Blog" href="/atom.xml"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css?v=1.6.10"><script>window.lazyScripts=[];</script></head><body><div id="loading" class="active"></div><aside id="menu" class="hide"><div class="inner flex-row-vertical"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off"><i class="icon icon-lg icon-close"></i></a><div class="brand-wrap" style="background-image:url(/img/brand.jpg)"><div class="brand"><a href="/" class="avatar waves-effect waves-circle waves-light"><img src="/img/face.jpg"></a><hgroup class="introduce"><h5 class="nickname">ç‹æ˜±æ£®</h5><a href="mailto:634206017@qq.com" title="634206017@qq.com" class="mail">634206017@qq.com</a></hgroup></div></div><div class="scroll-wrap flex-col"><ul class="nav"><li class="waves-block waves-effect"><a href="/"><i class="icon icon-lg icon-home"></i> Home</a></li><li class="waves-block waves-effect"><a href="/archives"><i class="icon icon-lg icon-archives"></i> Archives</a></li><li class="waves-block waves-effect"><a href="/tags"><i class="icon icon-lg icon-tags"></i> Tags</a></li><li class="waves-block waves-effect"><a href="https://github.com/yscoder" target="_blank"><i class="icon icon-lg icon-github"></i> Github</a></li><li class="waves-block waves-effect"><a href="http://www.weibo.com/ysweb" target="_blank"><i class="icon icon-lg icon-weibo"></i> Weibo</a></li></ul></div></div></aside><main id="main"><header class="top-header" id="header"><div class="flex-row"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle"><i class="icon icon-lg icon-navicon"></i></a><div class="flex-col header-title ellipsis">Vueå•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥æ¢ç´¢</div><div class="search-wrap" id="search-wrap"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back"><i class="icon icon-lg icon-chevron-left"></i></a> <input id="key" class="search-input" autocomplete="off" placeholder="è¾“å…¥æ„Ÿå…´è¶£çš„å…³é”®å­—"> <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search"><i class="icon icon-lg icon-search"></i></a></div><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare"><i class="icon icon-lg icon-share-alt"></i></a></div></header><header class="content-header post-header"><div class="container fade-scale"><h1 class="title">Vueå•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥æ¢ç´¢</h1><h5 class="subtitle"><time datetime="2017-05-07T07:55:40.000Z" itemprop="datePublished" class="page-time">2017å¹´05æœˆ7æ—¥</time></h5></div></header><div class="container body-wrap"><aside class="post-widget"><nav class="post-toc-wrap" id="post-toc"><h4>TOC</h4><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#å‘å¸ƒè®¢é˜…æ¨¡å¼"><span class="post-toc-number">1.</span> <span class="post-toc-text">å‘å¸ƒè®¢é˜…æ¨¡å¼</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æ•°æ®æµ"><span class="post-toc-number">2.</span> <span class="post-toc-text">æ•°æ®æµ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Vueä¸­çš„è§£å†³æ–¹æ¡ˆ"><span class="post-toc-number">3.</span> <span class="post-toc-text">Vueä¸­çš„è§£å†³æ–¹æ¡ˆ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Modelçš„å­˜æ”¾"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">Modelçš„å­˜æ”¾</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#éå…±äº«Model"><span class="post-toc-number">3.1.1.</span> <span class="post-toc-text">éå…±äº«Model</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å…±äº«Model"><span class="post-toc-number">3.1.2.</span> <span class="post-toc-text">å…±äº«Model</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#è®¡ç®—å±æ€§-vs-Getter"><span class="post-toc-number">3.1.3.</span> <span class="post-toc-text">è®¡ç®—å±æ€§ vs Getter</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Modelçš„æ›´æ–°"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">Modelçš„æ›´æ–°</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å•State"><span class="post-toc-number">3.2.1.</span> <span class="post-toc-text">å•State</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#å¤šState"><span class="post-toc-number">3.2.2.</span> <span class="post-toc-text">å¤šState</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#æ•°æ®åŒæ­¥"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">æ•°æ®åŒæ­¥</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æ¨è"><span class="post-toc-number">4.</span> <span class="post-toc-text">æ¨è</span></a></li></ol></nav></aside><article id="post-data-sync-in-vue-single-page-application" class="post-article article-type-post fade" itemprop="blogPost"><div class="post-card"><h1 class="post-card-title">Vueå•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥æ¢ç´¢</h1><div class="post-meta"><time class="post-time" title="2017å¹´05æœˆ7æ—¥ 15:55:40" datetime="2017-05-07T07:55:40.000Z" itemprop="datePublished">2017å¹´05æœˆ7æ—¥</time></div><div class="post-content" id="post-content" itemprop="postContent"><blockquote><p>ä¸€ä¸ªå¤šæœˆæ²¡å†™åšï¼Œæœ€è¿‘ä¸€ä¸ªæœˆçš„ Github æäº¤æ•°å°‘äº†å¾ˆå¤šï¼Œæ€»ä¹‹å°±æ˜¯å„ç§çŠ¶æ€ä¸å¥½ã€‚å¾®åšä¸Šçœ‹åˆ°ä¸Šä¸ªæœˆæ˜¯æ°´é€†ï¼Œçœ‹æ¥æˆ‘ä¹Ÿæ˜¯å—ç¾ç¾¤ä¼—äº†ã€‚ğŸ˜</p></blockquote><p>å•é¡µåº”ç”¨çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯å³æ—¶å“åº”ï¼Œå¯¹å‘ç”Ÿå˜åŒ–æ•°æ®å®ç° UI çš„å¿«é€Ÿå˜æ›´ã€‚å®ç°çš„åŸºç¡€æŠ€æœ¯ä¸å¤–ä¹ AJAX å’Œ WebSocketï¼Œå‰è€…è´Ÿè´£æ•°æ®çš„è·å–å’Œæ›´æ–°ï¼Œåè€…è´Ÿè´£å˜æ›´æ•°æ®çš„å®¢æˆ·ç«¯åŒæ­¥ã€‚å…¶ä¸­è¦è§£å†³çš„æœ€ä¸»è¦çš„é—®é¢˜è¿˜æ˜¯æ•°æ®åŒæ­¥ã€‚</p><p>å¯ä»¥æŠŠè¿™ä¸ªé—®é¢˜æ‹†åˆ†ä¸ºä¸¤ä¸ªå…·ä½“é—®é¢˜ï¼š</p><ol><li><strong>æ•°æ®å…±äº«</strong>ï¼šå¤šä¸ªè§†å›¾å¼•ç”¨çš„æ•°æ®èƒ½åœ¨å‘ç”Ÿå˜åŒ–åï¼Œå³æ—¶å“åº”å˜åŒ–ã€‚</li><li><strong>æ•°æ®åŒæ­¥</strong>ï¼šå¤šç»ˆç«¯è®¿é—®çš„æ•°æ®èƒ½åœ¨ä¸€ä¸ªå®¢æˆ·ç«¯å‘ç”Ÿå˜åŒ–åï¼Œå³æ—¶å“åº”å˜åŒ–ã€‚<a id="more"></a></li></ol><h2 id="å‘å¸ƒè®¢é˜…æ¨¡å¼"><a href="#å‘å¸ƒè®¢é˜…æ¨¡å¼" class="headerlink" title="å‘å¸ƒè®¢é˜…æ¨¡å¼"></a>å‘å¸ƒè®¢é˜…æ¨¡å¼</h2><p>åœ¨æ—§çš„é¡¹ç›®ä¸­æ˜¯ä½¿ç”¨äº†å‘å¸ƒè®¢é˜…æ¨¡å¼è§£å†³è¿™äº›é—®é¢˜ã€‚ä¸ç®¡æ˜¯ AJAX è¯·æ±‚çš„è¿”å›æ•°æ®è¿˜æ˜¯ WebSocket çš„æ¨é€æ•°æ®ï¼Œç»Ÿä¸€å‘å…¨å±€å‘å¸ƒæ¶ˆæ¯ï¼Œæ¯ä¸ªéœ€è¦è¿™äº›æ•°æ®çš„è§†å›¾å»è®¢é˜…å¯¹åº”çš„æ¶ˆæ¯ä½¿è§†å›¾å˜åŒ–ã€‚</p><p>ç¼ºç‚¹æ˜¯ï¼šä¸€ä¸ªè§†å›¾ä¸ºäº†å“åº”å˜åŒ–éœ€è¦å†™å¾ˆå¤šè®¢é˜…å¹¶æ›´æ–°è§†å›¾æ•°æ®çš„ç¡¬ç¼–ç ï¼Œæ¶‰åŠæ•°æ®è¶Šå¤šï¼Œé€»è¾‘ä¹Ÿè¶Šå¤æ‚ã€‚</p><h2 id="æ•°æ®æµ"><a href="#æ•°æ®æµ" class="headerlink" title="æ•°æ®æµ"></a>æ•°æ®æµ</h2><p>å¯¹äº Vueï¼Œé¦–å…ˆå®ƒæ˜¯ä¸€ä¸ª MVVM æ¡†æ¶ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Model &lt;----&gt; ViewModel &lt;----&gt; View</div></pre></td></tr></table></figure><p>ä¸€ç›®äº†ç„¶çš„å…³ç³»ï¼ŒModel çš„å˜åŒ–å½±å“åˆ° ViewModel çš„å˜åŒ–å†è§¦å‘ View æ›´æ–°ã€‚é‚£ä¹ˆåè¿‡æ¥å‘¢ï¼ŒView æ›´æ”¹ ViewModel å†æ›´æ”¹ Modelï¼Ÿ</p><p>å¯¹äºæ›´æ–°æ•°æ®è€Œè¨€ï¼Œæ›´æ”¹ ViewModel çœŸæ˜¯å¤šæ­¤ä¸€ä¸¾äº†ã€‚å› ä¸ºæˆ‘ä»¬åªéœ€è¦æ”¹å˜ Model æ•°æ®è‡ªç„¶å°±ä¼šæŒ‰ç…§<code>Model &gt; ViewModel &gt; View</code>çš„è·¯å¾„åŒæ­¥è¿‡æ¥äº†ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ Vue åæ¥æŠ›å¼ƒäº†åŒå‘ç»‘å®šï¼Œè€Œä»…ä»…æ”¯æŒè¡¨å•ç»„ä»¶çš„åŒå‘ç»‘å®šã€‚å¯¹äºåŒå‘ç»‘å®šè€Œè¨€ï¼Œè¡¨å•ç®—å¾—ä¸Šæ˜¯æœ€ä½³å®è·µåœºæ™¯äº†ã€‚</p><p>åœ¨å¼€å‘å®è·µä¸­ï¼Œæœ€å¸¸è§çš„è¿˜æ˜¯å•å‘æ•°æ®æµã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Model --&gt; ViewModel --&gt; View --&gt; Model</div></pre></td></tr></table></figure><p>å•å‘æ•°æ®æµå‘Šè¯‰æˆ‘ä»¬è¿™æ ·ä¸¤æ ·äº‹ï¼š</p><ol><li>ä¸ç›´æ¥ç»‘å®š Modelï¼Œè€Œæ˜¯ä½¿ç”¨ç”± 1~N ä¸ª Model èšåˆçš„ ViewModelã€‚</li><li>View çš„å˜åŒ–æ°¸è¿œå»ä¿®æ”¹å˜æ›´å€¼å¯¹åº”çš„ Modelã€‚</li></ol><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://7ximpj.com1.z0.glb.clouddn.com/vue-practice-in-complex-single-page-application-201757194432.jpg" alt="Data Flow"></div><div class="image-caption">Data Flow</div></figure><p>è§£å†³æ•°æ®é—®é¢˜çš„ç­”æ¡ˆå·²ç»å‘¼ä¹‹æ¬²å‡ºäº†ã€‚</p><p><strong>å¤šä¸ªè§†å›¾å¼•ç”¨çš„æ•°æ®åœ¨å‘ç”Ÿå˜åŒ–åï¼Œå¦‚ä½•å“åº”å˜åŒ–ï¼Ÿ</strong></p><p>ä¿è¯å¤šä¸ª View ç»‘å®šçš„ ViewModel ä¸­å…±åŒæ•°æ®æ¥è‡ªåŒä¸€ä¸ª <code>Model</code>ã€‚</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://7ximpj.com1.z0.glb.clouddn.com/vue-practice-in-complex-single-page-application-20175720345.jpg" alt=""></div><div class="image-caption"></div></figure><p><strong>å¤šç»ˆç«¯è®¿é—®çš„æ•°æ®åœ¨ä¸€ä¸ªå®¢æˆ·ç«¯å‘ç”Ÿå˜åŒ–åï¼Œå¦‚ä½•å“åº”å˜åŒ–ï¼Ÿ</strong></p><p>é¦–å…ˆå¤šç»ˆç«¯æ•°æ®åŒæ­¥æ¥æºäº WebSocket æ•°æ®æ¨é€ï¼Œè¦ä¿è¯æ”¶åˆ°æ•°æ®æ¨é€æ—¶å»æ›´æ”¹ç›´æ¥å¯¹åº”çš„ Modelï¼Œè€Œä¸æ˜¯ ViewModelã€‚</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="http://7ximpj.com1.z0.glb.clouddn.com/vue-practice-in-complex-single-page-application-201757202023.jpg" alt=""></div><div class="image-caption"></div></figure><h2 id="Vueä¸­çš„è§£å†³æ–¹æ¡ˆ"><a href="#Vueä¸­çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="Vueä¸­çš„è§£å†³æ–¹æ¡ˆ"></a>Vueä¸­çš„è§£å†³æ–¹æ¡ˆ</h2><p>ä¸åªæ˜¯è¦æ€æƒ³ä¸Šè§£å†³é—®é¢˜ï¼Œè€Œä¸”è¦ä»£å…¥åˆ°ç¼–ç¨‹è¯­è¨€ã€æ¡†æ¶ç­‰å¼€å‘æŠ€æœ¯ä¸­å®ç°ã€‚</p><h3 id="Modelçš„å­˜æ”¾"><a href="#Modelçš„å­˜æ”¾" class="headerlink" title="Modelçš„å­˜æ”¾"></a>Modelçš„å­˜æ”¾</h3><p>Model ä½œä¸ºåŸå§‹æ•°æ®ï¼Œä¸€èˆ¬ä¸º AJAX GET å¾—åˆ°çš„æ•°æ®ï¼Œåº”è¯¥ä½äºæ•´ä¸ª Vue é¡¹ç›®ç»“æ„çš„æœ€ä¸Šå±‚ã€‚å¯¹äº Model çš„å­˜æ”¾ä½ç½®ï¼Œä¹Ÿæœ‰ä¸åŒçš„é€‰æ‹©ã€‚</p><h4 id="éå…±äº«Model"><a href="#éå…±äº«Model" class="headerlink" title="éå…±äº«Model"></a>éå…±äº«Model</h4><p>ä¸éœ€è¦å…±äº«çš„ Model å¯ä»¥æ”¾åˆ°è§†å›¾ç»„ä»¶çš„<code>data</code>ä¸­ã€‚ä½†ä»ç„¶é¿å… View ç›´æ¥ç»‘å®š Modelï¼Œå³ä½¿è¯¥ View çš„ ViewModel ä¸å†éœ€è¦é¢å¤–çš„ Model èšåˆã€‚å› ä¸ºæœ€ç»ˆå½±å“ View å‘ˆç°çš„ä¸åªæ˜¯æ¥è‡ªæœåŠ¡å™¨çš„ Model æ•°æ®ï¼Œè¿˜æœ‰è§†å›¾çŠ¶æ€<code>ViewState</code>ã€‚</p><p>æ¥ä¸ªğŸŒ°ï¼šä¸€ä¸ªç®€å•çš„åˆ—è¡¨ç»„ä»¶ï¼Œè´Ÿè´£æ¸²æŸ“å±•ç¤ºæ•°æ®å’Œå…³é”®å­—è¿‡æ»¤åŠŸèƒ½ã€‚è¾“å…¥çš„è¿‡æ»¤å…³é”®å­—å’Œåˆ—è¡¨æ•°æ®éƒ½ä½œä¸º data å­˜æ”¾ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    data() &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">filterVal</span>: <span class="string">''</span>,</div><div class="line">            <span class="attr">list</span>: []</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    created() &#123;</div><div class="line">        Ajax.getData().then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</div><div class="line">            <span class="keyword">this</span>.list = data</div><div class="line">        &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">methods</span>: &#123;</div><div class="line">        filter() &#123;</div><div class="line">            <span class="keyword">this</span>.list = <span class="keyword">this</span>.list.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.name === <span class="keyword">this</span>.filterVal)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœ View ç›´æ¥ç»‘å®šäº†ä»¥ä¸Šä»£ç ä¸­çš„<code>list</code>ï¼Œé‚£ä¹ˆåœ¨<code>filter</code>å‡½æ•°æ‰§è¡Œä¸€æ¬¡åï¼Œè™½ç„¶ View æ›´æ–°äº†ï¼Œä½†åŒæ—¶<code>list</code>ä¹Ÿè¢«æ”¹å˜ï¼Œä¸å†æ˜¯ä¸€ä¸ªåŸå§‹æ•°æ®äº†ï¼Œä¸‹ä¸€æ¬¡æ‰§è¡Œ<code>filter</code>å‡½æ•°å°†æ˜¯ä»ä¸Šä¸€æ¬¡çš„ç»“æœé›†ä¸­è¿‡æ»¤ã€‚<br>å¾ˆå°´å°¬ï¼Œæ€»ä¸èƒ½é‡æ–°è¯·æ±‚æ•°æ®å§ï¼Œé‚£æ ·è¿˜æä»€ä¹ˆ SPAã€‚</p><p>ç°åœ¨æˆ‘ä»¬æœ‰äº†æ–°çš„å‘ç°ï¼š<strong>ViewModel</strong> å—<code>Model</code>å’Œ<code>ViewState</code>çš„åŒé‡å½±å“ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">ViewModel = ä¸€ä¸ªæˆ–å¤šä¸ª Model ç»„åˆ + å½±å“ View å±•ç¤ºçš„ ViewState</div><div class="line"></div><div class="line">å³: viewModel = models.fn(viewState)</div></pre></td></tr></table></figure><p>Vue ä¸­æœ‰æ²¡æœ‰å¥½çš„æ–¹æ³•å¯ä»¥å¾ˆå¥½çš„æè¿°è¿™ä¸ªè¡¨è¾¾å¼å‘¢ï¼Ÿé‚£å°±æ˜¯è®¡ç®—å±æ€§<code>computed</code>ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    data() &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">filterVal</span>: <span class="string">''</span>,</div><div class="line">            <span class="attr">list</span>: []</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">computed</span>: &#123;</div><div class="line">        viewList() &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.filterVal</div><div class="line">                ? <span class="keyword">this</span>.list.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.name === <span class="keyword">this</span>.filterVal)</div><div class="line">                : <span class="keyword">this</span>.list</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    created() &#123;</div><div class="line">        Ajax.getData().then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</div><div class="line">            <span class="keyword">this</span>.list = data</div><div class="line">        &#125;)</div><div class="line">    &#125;,</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æ”¹å†™ä»£ç åï¼ŒView ç»‘å®šè®¡ç®—å±æ€§<code>viewList</code>ï¼Œæœ‰è¿‡æ»¤å…³é”®å­—å°±è¿”å›è¿‡æ»¤ç»“æœï¼Œå¦åˆ™è¿”å›åŸå§‹æ•°æ®ã€‚è¿™æ‰ç§°å¾—ä¸Šæ˜¯ <strong>æ•°æ®é©±åŠ¨</strong>ã€‚</p><h4 id="å…±äº«Model"><a href="#å…±äº«Model" class="headerlink" title="å…±äº«Model"></a>å…±äº«Model</h4><p>å¦‚æœä¸€ä¸ª View ä¸­å­˜åœ¨å¤šå¤„å…±äº«çš„ Modelï¼Œé‚£ä¹ˆæ¯«ä¸çŠ¹è±«çš„ä½¿ç”¨ Vuex å§ã€‚</p><p>å¯¹äºå¤æ‚å•é¡µåº”ç”¨ï¼Œå¯ä»¥è€ƒè™‘åˆ†æ¨¡å—ç®¡ç†ï¼Œé¿å…å…¨å±€çŠ¶æ€è¿‡äºåºå¤§ã€‚å³ä½¿æ˜¯å…±äº«çš„ Model ä¹Ÿæ˜¯åˆ†å±ä¸åŒçš„ä¸šåŠ¡æ¨¡å—å’Œå…±äº«çº§åˆ«ã€‚<br>æ¯”å¦‚æ–‡æ¡£æ•°æ®ï¼Œå¯èƒ½åªæœ‰<code>/document</code>èµ·å§‹è·¯å¾„ä¸‹çš„è§†å›¾éœ€è¦å…±äº«ã€‚é‚£ä¹ˆä»èŠ‚çœå†…å­˜çš„è§’åº¦è€ƒè™‘ï¼Œåªæœ‰è¿›å…¥è¯¥è·¯ç”±æ—¶æ‰å»è£…è½½å¯¹åº”çš„ Vuex æ¨¡å—ã€‚å¹¸è¿çš„æ˜¯ Vuex æä¾›çš„æ¨¡å—åŠ¨æ€è£…è½½çš„ APIã€‚</p><p>å¯¹äºå…±äº«çº§åˆ«é«˜çš„æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·ç›¸å…³çš„æ•°æ®ï¼Œå¯ä»¥ç›´æ¥ç»‘å®šåˆ° Vuex æ¨¡å—ä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">store</div><div class="line">|   actions.js</div><div class="line">|   index.js</div><div class="line">|   mutations.js</div><div class="line">+---global</div><div class="line">|       user.js</div><div class="line">+---partial</div><div class="line">|       foo.js</div><div class="line">|       bar.js</div></pre></td></tr></table></figure><p>åˆ†æ¨¡å—ç®¡ç†åï¼Œé©¬ä¸Šå°±ä¼šé‡åˆ°è·¨æ¨¡å—è°ƒç”¨æ•°æ®çš„é—®é¢˜ã€‚ä¸€ä¸ª View ä¸­éœ€è¦çš„æ•°æ®å¾€å¾€æ˜¯å…¨å±€çŠ¶æ€å’Œæ¨¡å—çŠ¶æ€æ•°æ®çš„èšåˆï¼Œå¯ä»¥ä½¿ç”¨<code>getter</code>è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">    getters: &#123;</div><div class="line">        viewData (state, getters, rootState) &#123;</div><div class="line">            <span class="keyword">return</span> state.data + rootState.data</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å¦‚æœä¸€ä¸ª View æ˜¯éœ€è¦å¤šä¸ªæ¨¡å—çŠ¶æ€çš„æ•°æ®å‘¢ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">    getters: &#123;</div><div class="line">        viewData (state, getters) &#123;</div><div class="line">            <span class="keyword">return</span> state.data + getters.partialData</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è™½ç„¶ä¸èƒ½ç›´æ¥è®¿é—®åˆ°å…¶ä»–æ¨¡å—çš„ stateï¼Œä½†æ˜¯<code>getter</code>å’Œ<code>action</code>ã€<code>mutation</code>éƒ½æ³¨å†Œåœ¨<strong>å…¨å±€å‘½åç©ºé—´</strong>ï¼Œè®¿é—®ä¸å—é™åˆ¶ã€‚</p><h4 id="è®¡ç®—å±æ€§-vs-Getter"><a href="#è®¡ç®—å±æ€§-vs-Getter" class="headerlink" title="è®¡ç®—å±æ€§ vs Getter"></a>è®¡ç®—å±æ€§ vs Getter</h4><p>Getter ä¸ç»„ä»¶çš„è®¡ç®—å±æ€§æ‹¥æœ‰ç›¸åŒçš„ä½œç”¨ï¼Œå…¶ä¸­å¼•ç”¨çš„ä»»ä½• state æˆ–è€… getter å˜åŒ–éƒ½ä¼šè§¦å‘è¿™ä¸ª getter é‡æ–°è®¡ç®—ã€‚</p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼š<strong>ä»€ä¹ˆæ—¶å€™æˆ‘åº”å½“ä½¿ç”¨è®¡ç®—å±æ€§ï¼Ÿä»€ä¹ˆæ—¶å€™ä½¿ç”¨ Getterï¼Ÿ</strong></p><p>è¿™é‡Œå…¶å®æ˜¯æœ‰ä¸€ä¸ª <strong>æ•°æ®å‰ç½®</strong> åŸåˆ™ï¼š<strong>èƒ½æ”¾åˆ°ä¸Šå±‚çš„å°±ä¸æ”¾åˆ°ä¸‹å±‚</strong>ã€‚</p><ul><li>éœ€è¦èšåˆå¤šä¸ª state æˆ– getter æ—¶ï¼Œä½¿ç”¨ getterã€‚å¦‚æœæœ‰å¤šä¸ªè§†å›¾éœ€è¦åŒæ ·çš„æ•°æ®ç»„åˆå°±å¯ä»¥å®ç° getter çš„å¤ç”¨ã€‚</li><li>éœ€è¦èšåˆçš„æ•°æ®ä¸­åŒ…å« ViewState æ—¶ï¼Œä½¿ç”¨ computedã€‚å› ä¸ºåœ¨ store ä¸­æ— æ³•è®¿é—® ViewStateã€‚</li></ul><p>è‡³æ­¤æˆ‘ä»¬å·²ç»ä¿è¯äº†åº”ç”¨å†…çš„ä»»ä½•ä¸€ä¸ªå…±äº«æ•°æ®æœ€ç»ˆéƒ½æ¥æºäºæŸä¸ªå…¨å±€çŠ¶æ€æˆ–æŸä¸ªæ¨¡å—çš„çŠ¶æ€ã€‚</p><h3 id="Modelçš„æ›´æ–°"><a href="#Modelçš„æ›´æ–°" class="headerlink" title="Modelçš„æ›´æ–°"></a>Modelçš„æ›´æ–°</h3><p>Model çš„æ›´æ–°æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æœ¬åœ°è§¦å‘çš„æ›´æ–°ï¼Œå¦ä¸€ç§æ˜¯å…¶ä»–å®¢æˆ·ç«¯æ›´æ–°å†ç”±æœåŠ¡å™¨æ¨é€çš„æ›´æ–°ã€‚</p><p>å¯ä»¥è¿™æ ·è¡¨ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Model = æœ¬åœ°åŸå§‹æ•°æ® + æœ¬åœ°æ›´æ–°æ•°æ® + æ¨é€æ•°æ®</div></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¼¼ä¹åˆå›åˆ°äº†é‚£ä¸ªåˆ—è¡¨ç»„ä»¶ç±»ä¼¼çš„é—®é¢˜ä¸Šã€‚è¦ä¸æŠŠ 3 ç§æ•°æ®éƒ½è®¾ä¸º stateï¼Œç”± 3 ç§æ•°æ®ç»„åˆçš„ getter æ¥è¡¨ç¤º Modelï¼Ÿ<br>ç°åœ¨æ¥æ¯”è¾ƒä¸€ä¸‹ã€‚å¦å¤–æœ‰ä¸€ä¸ªå‰ææ˜¯ Vuex åªå…è®¸æäº¤ mutation æ¥æ›´æ”¹ stateã€‚</p><h4 id="å•State"><a href="#å•State" class="headerlink" title="å•State"></a>å•State</h4><p>å¯¹äºä¸€ä¸ª state çš„æ›´æ–°ä¸å¤–ä¹æ˜¯å¢ã€åˆ ã€æ”¹ã€æŸ¥å››ç§æƒ…å†µï¼Œæ‰€ä»¥è‡³å°‘å¯¹åº”æœ‰ 4 ä¸ª action å’Œ 4 ä¸ª mutationï¼Œç›´æ¥å¯¹è¡¨ç¤ºæºæ•°æ®çš„ state è¿›è¡Œæ›´æ”¹ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="attr">state</span>: &#123;</div><div class="line">        <span class="attr">data</span>: []</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">mutations</span>: &#123;</div><div class="line">        init(state, payload) &#123;</div><div class="line">            state.data = payload</div><div class="line">        &#125;,</div><div class="line">        add(state, payload) &#123;</div><div class="line">            state.data.push(payload)</div><div class="line">        &#125;,</div><div class="line">        <span class="keyword">delete</span>(state, payload) &#123;</div><div class="line">            state.data.splice(state.data.findIndex(<span class="function"><span class="params">item</span> =&gt;</span> item.id === payload), <span class="number">1</span>)</div><div class="line">        &#125;,</div><div class="line">        update(state, payload) &#123;</div><div class="line">            <span class="built_in">Object</span>.assign(state.data.find(<span class="function"><span class="params">item</span> =&gt;</span> item.id === payload.id), payload)</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">actions</span>: &#123;</div><div class="line">        fetch(&#123; commit &#125;) &#123;</div><div class="line">            Api.getData().then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</div><div class="line">                commit(<span class="string">'init'</span>, data)</div><div class="line">            &#125;)</div><div class="line">        &#125;,</div><div class="line">        add(&#123; commit &#125;, item) &#123;</div><div class="line">            Api.add(item).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</div><div class="line">                commit(<span class="string">'add'</span>, item)</div><div class="line">            &#125;)</div><div class="line">        &#125;,</div><div class="line">        <span class="keyword">delete</span>(&#123; commit &#125;, id) &#123;</div><div class="line">            Api.delete(id).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</div><div class="line">                commit(<span class="string">'delete'</span>, id)</div><div class="line">            &#125;)</div><div class="line">        &#125;,</div><div class="line">        update(&#123; commit &#125;, item) &#123;</div><div class="line">            Api.update(item).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</div><div class="line">                commit(<span class="string">'update'</span>, item)</div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="å¤šState"><a href="#å¤šState" class="headerlink" title="å¤šState"></a>å¤šState</h4><p>å¦‚æœæŠŠä¸€ä¸ª Model æ‹†æˆå¤šä¸ª stateï¼Œæœ¬åœ°æ›´æ–°æ•°æ®å’Œæ¨é€æ•°æ®ç»Ÿä¸€ä¸ºå˜æ›´æ•°æ®ï¼Œå¯¹åº”åˆ°å¢ã€åˆ ã€æ”¹ã€æŸ¥å››ç§æƒ…å†µï¼Œé‚£å°±éœ€è¦ 4 ä¸ª stateï¼Œå³ï¼š<code>originData</code>ã€<code>addData</code>ã€<code>deleteData</code>ã€<code>updateData</code>ã€‚<br>mutation å’Œ action åˆ°ä¸ä¼šæœ‰ä»€ä¹ˆå˜åŒ–ï¼Œå¢ã€åˆ ã€æ”¹åŸæœ¬å°±æ˜¯åˆ†å¼€å†™çš„ï¼Œåªæ˜¯å„è‡ªå¯¹åº”åˆ°ä¸åŒçš„ state ä¸Šï¼Œæœ€ç»ˆçš„ Model ç”±ä¸€ä¸ª getter æ¥è¡¨ç¤ºã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="attr">state</span>: &#123;</div><div class="line">        <span class="attr">originData</span>: [],</div><div class="line">        <span class="attr">addData</span>: [],</div><div class="line">        <span class="attr">deleteData</span>: [],</div><div class="line">        <span class="attr">updateData</span>: []</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">getters</span>: &#123;</div><div class="line">        data(state) &#123;</div><div class="line">            <span class="keyword">return</span> state.originData.concat(state.addData)     <span class="comment">// add</span></div><div class="line">                .map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">Object</span>.assign(item,</div><div class="line">                    state.updateData.find(<span class="function"><span class="params">uItem</span> =&gt;</span> uItem.id === item.id))) <span class="comment">// update</span></div><div class="line">                .filter(<span class="function"><span class="params">item</span> =&gt;</span> !state.deleteData.find(<span class="function"><span class="params">id</span> =&gt;</span> id === item.id)) <span class="comment">// delete</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">mutations</span>: &#123;</div><div class="line">        init(state, payload) &#123;</div><div class="line">            state.originData = payload</div><div class="line">        &#125;,</div><div class="line">        add(state, payload) &#123;</div><div class="line">            state.addData.push(payload)</div><div class="line">        &#125;,</div><div class="line">        <span class="keyword">delete</span>(state, payload) &#123;</div><div class="line">            state.deleteData.push(payload)</div><div class="line">        &#125;,</div><div class="line">        update(state, payload) &#123;</div><div class="line">            state.updateData.push(payload)</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">actions</span>: &#123;</div><div class="line">        <span class="comment">// ç•¥...</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™ä¹ˆä¸€å¤§ä¸²æ–¹æ³•é“¾çœ‹èµ·æ¥å¾ˆé…·å¯¹ä¸å¯¹ï¼Œä½†æ˜¯æ€§èƒ½å‘¢ï¼Ÿä»»ä½•ä¸€ä¸ª state çš„å˜æ›´éƒ½å°†å¼•èµ·è¿™ä¸ªå¤æ‚çš„ getter é‡æ–°æ‰§è¡Œ 5 ä¸ªå¾ªç¯æ“ä½œã€‚</p><p>çŸ¥ä¹ä¸Šæœ‰ä¸ªç›¸å…³é—®é¢˜çš„è®¨è®ºï¼š<a href="https://www.zhihu.com/question/54637225" target="_blank" rel="external">JavaScript å‡½æ•°å¼ç¼–ç¨‹å­˜åœ¨æ€§èƒ½é—®é¢˜ä¹ˆï¼Ÿ</a><br>å…¶ä¸­æåˆ°çš„è§£å†³åŠæ³•æ˜¯<strong>æƒ°æ€§è®¡ç®—</strong>ã€‚ç›¸å…³çš„å‡½æ•°åº“æœ‰ï¼š<a href="http://danieltao.com/lazy.js/" target="_blank" rel="external">lazy.js</a>ï¼Œæˆ–è€…ä½¿ç”¨ lodash ä¸­çš„ <a href="https://lodash.com/docs/4.17.4#chain" target="_blank" rel="external">_.chain</a> å‡½æ•°ã€‚</p><p>è¿˜æœ‰ä¸€ç§åŠæ³•æ˜¯ç»Ÿä¸€ä¸º<code>K, V</code>æ•°æ®ç»“æ„ï¼Œè¿™æ ·ä¸€ä¸ªæ··åˆå‡½æ•°å°±æå®šäº†<code>Object.assign(originData, addData, updateData, deleteData)</code>ã€‚</p><p>å¯¹æ¯”è€Œè¨€ï¼Œæˆ‘è®¤ä¸ºå¤š state çš„æ–¹å¼æ›´ç¬¦åˆæ•°æ®é©±åŠ¨åŠå“åº”å¼ç¼–ç¨‹æ€ç»´ï¼Œä½†éœ€è¦æœ‰å¥½çš„åŠæ³•å»è§£å†³å¤æ‚çš„å¾ªç¯æ“ä½œè¿™ä¸ªé—®é¢˜ï¼Œå• state çš„æ–¹å¼å°±æ˜¯é¢å‘å¤§ä¼—äº†ï¼Œä¸¤è€…éƒ½å¯ä»¥è§£å†³é—®é¢˜ã€‚ç”šè‡³äºå…¨é¢ä½¿ç”¨å“åº”å¼ç¼–ç¨‹ï¼Œä½¿ç”¨ <a href="http://reactivex.io/rxjs/" target="_blank" rel="external">RxJS</a> æ›¿ä»£ Vuexã€‚</p><h3 id="æ•°æ®åŒæ­¥"><a href="#æ•°æ®åŒæ­¥" class="headerlink" title="æ•°æ®åŒæ­¥"></a>æ•°æ®åŒæ­¥</h3><p>å‰é¢æåˆ°è¿‡äº†ï¼Œä¸ç®¡æ˜¯æœ¬åœ°æ›´æ–°æ•°æ®è¿˜æ˜¯æœåŠ¡ç«¯æ¨é€æ•°æ®ï¼Œå¯ä»¥ç»Ÿä¸€ä¸ºå¢ã€åˆ ã€æ”¹ä¸‰ç§æ¥å£ã€‚ä¸ç®¡æ˜¯æœ¬åœ°æ›´æ–°è¿˜æ˜¯æ¨é€æ•°æ®ï¼Œæ ¹æ®æ•°æ®åŒæ­¥ç±»å‹èµ°åŒä¸€ä¸ªæ•°æ®æ›´æ”¹å‡½æ•°ã€‚</p><p>è¿™åœ¨ Vuex ä¸­å¾ˆå®¹æ˜“å®ç°ã€‚åˆ©äº Vuex çš„æ’ä»¶åŠŸèƒ½ï¼Œå¯ä»¥åœ¨æ¥å—æ¨é€åæäº¤åˆ°å¯¹åº”çš„ mutationã€‚å‰ææ˜¯è¦å’Œåç«¯çº¦å¥½æ•°æ®æ ¼å¼ï¼Œæ›´æ–¹ä¾¿çš„æ˜ å°„åˆ°å¯¹åº”çš„ mutationTypeï¼Œæ¯”å¦‚ï¼š<code>{ æ•°æ®åï¼ŒåŒæ­¥ç±»å‹ï¼ŒåŒæ­¥æ•°æ® }</code>ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> store =&gt; &#123;</div><div class="line">    socket.on(<span class="string">'data'</span>, data =&gt; &#123;</div><div class="line">        <span class="keyword">const</span> &#123; name, type, data &#125; = data</div><div class="line">        store.commit(type + name, data)</div><div class="line">    &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™æ ·å°±å®ç°äº†æœ¬åœ°å¢ã€åˆ ã€æ”¹ä¸æ¨é€æ•°æ®å¢ã€åˆ ã€æ”¹çš„æ— å·®å¼‚åŒ–ã€‚</p><h2 id="æ¨è"><a href="#æ¨è" class="headerlink" title="æ¨è"></a>æ¨è</h2><ul><li><a href="https://github.com/xufei/blog/issues/47" target="_blank" rel="external">å¾é£ï¼šå•é¡µåº”ç”¨çš„æ•°æ®æµæ–¹æ¡ˆæ¢ç´¢</a></li><li><a href="https://github.com/xufei/blog/issues/42" target="_blank" rel="external">å¾é£ï¼šå¤æ‚å•é¡µåº”ç”¨çš„æ•°æ®å±‚è®¾è®¡</a></li></ul></div><blockquote class="post-copyright"><div class="content"><span class="post-time">æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2017-05-13T00:05:11.888Z" itemprop="dateUpdated">2017å¹´05æœˆ13æ—¥ 8:05:11</time></span><br>åŸå§‹é“¾æ¥ï¼š<a href="/20170507/data-sync-in-vue-single-page-application.html" target="_blank" rel="external">http://imys.net/20170507/data-sync-in-vue-single-page-application.html</a></div><footer><a href="http://imys.net"><img src="/img/face.jpg" alt="ç‹æ˜±æ£®"> ç‹æ˜±æ£®</a></footer></blockquote><div class="page-reward"><a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">èµ</a></div><div class="post-footer"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SPA/">SPA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/">Vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vuex/">Vuex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æ•°æ®åŒæ­¥/">æ•°æ®åŒæ­¥</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æ•°æ®æµ/">æ•°æ®æµ</a></li></ul><div class="page-share-wrap"><div class="page-share" id="pageShare"><ul class="reset share-icons"><li><a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://imys.net/20170507/data-sync-in-vue-single-page-application.html&title=ã€ŠVueå•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥æ¢ç´¢ã€‹ â€” Yusen's Blog&pic=http://imys.net/img/face.jpg" data-title="å¾®åš"><i class="icon icon-weibo"></i></a></li><li><a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡"><i class="icon icon-weixin"></i></a></li><li><a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://imys.net/20170507/data-sync-in-vue-single-page-application.html&title=ã€ŠVueå•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥æ¢ç´¢ã€‹ â€” Yusen's Blog&source=ä¸€ä¸ªå¤šæœˆæ²¡å†™åšï¼Œæœ€è¿‘ä¸€ä¸ªæœˆçš„ Github æäº¤æ•°å°‘äº†å¾ˆå¤šï¼Œæ€»ä¹‹å°±æ˜¯å„ç§çŠ¶æ€ä¸å¥½ã€‚å¾®åšä¸Šçœ‹åˆ°ä¸Šä¸ªæœˆæ˜¯æ°´é€†ï¼Œçœ‹æ¥æˆ‘ä¹Ÿæ˜¯å—ç¾ç¾¤ä¼—äº†ã€‚ğŸ˜å•é¡µåº”ç”¨çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯..." data-title=" QQ"><i class="icon icon-qq"></i></a></li><li><a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://imys.net/20170507/data-sync-in-vue-single-page-application.html" data-title=" Facebook"><i class="icon icon-facebook"></i></a></li><li><a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠVueå•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥æ¢ç´¢ã€‹ â€” Yusen's Blog&url=http://imys.net/20170507/data-sync-in-vue-single-page-application.html&via=http://imys.net" data-title=" Twitter"><i class="icon icon-twitter"></i></a></li><li><a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://imys.net/20170507/data-sync-in-vue-single-page-application.html" data-title=" Google+"><i class="icon icon-google-plus"></i></a></li></ul></div><a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle"><i class="icon icon-share-alt icon-lg"></i></a></div></div></div><nav class="post-nav flex-row flex-justify-between flex-row-reverse"><div class="waves-block waves-effect next"><a href="/20170318/vuex-cache-design.html" id="post-next" class="post-nav-link"><div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div><h4 class="title">Vuexä¸å‰ç«¯ç¼“å­˜çš„æ•´åˆç­–ç•¥</h4></a></div></nav><div id="cloud-tie-wrapper" class="comments cloud-tie-wrapper"></div><script>var cloudTieConfig={url:"http://imys.net/20170507/data-sync-in-vue-single-page-application.html",sourceId:"data-sync-in-vue-single-page-application",productKey:"1638de6430b6493ba3bdbcfab050b9af",target:"cloud-tie-wrapper",pcFiles:["/css/cloudTie/pc.css?v=1.6.10","/js/cloudTie/pc.min.js?v=1.6.10"],mobileFiles:["/css/cloudTie/mobile.css?v=1.6.10","/js/cloudTie/mobile.min.js?v=1.6.10"]};</script><script src="/js/cloudTie/loader.min.js?v=1.6.10"></script></article><div id="reward" class="page-modal reward-lay"><a class="close" href="javascript:;"><i class="icon icon-close"></i></a><h3 class="reward-title"><i class="icon icon-quote-left"></i> è¯·æˆ‘åƒè¾£æ¡~ <i class="icon icon-quote-right"></i></h3><div class="reward-content"><div class="reward-code"><img id="rewardCode" src="/img/wechat.jpg" alt="æ‰“èµäºŒç»´ç "></div><label class="reward-toggle"><input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg"><div class="reward-toggle-ctrol"><span class="reward-toggle-item wechat">å¾®ä¿¡</span> <span class="reward-toggle-label"></span> <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span></div></label></div></div></div><footer class="footer"><div class="top"><p><span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span> <span>åšå®¢å†…å®¹éµå¾ª <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a></span></p></div><div class="bottom"><p><span>ç‹æ˜±æ£® &copy; 2015 - 2017</span> <span><a href="http://www.miitbeian.gov.cn/" target="_blank">è±«ICPå¤‡17023738å·-1</a><br>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></span></p></div></footer></main><div class="mask" id="mask"></div><a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a><div class="global-share" id="globalShare"><ul class="reset share-icons"><li><a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://imys.net/20170507/data-sync-in-vue-single-page-application.html&title=ã€ŠVueå•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥æ¢ç´¢ã€‹ â€” Yusen's Blog&pic=http://imys.net/img/face.jpg" data-title="å¾®åš"><i class="icon icon-weibo"></i></a></li><li><a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡"><i class="icon icon-weixin"></i></a></li><li><a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://imys.net/20170507/data-sync-in-vue-single-page-application.html&title=ã€ŠVueå•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥æ¢ç´¢ã€‹ â€” Yusen's Blog&source=ä¸€ä¸ªå¤šæœˆæ²¡å†™åšï¼Œæœ€è¿‘ä¸€ä¸ªæœˆçš„ Github æäº¤æ•°å°‘äº†å¾ˆå¤šï¼Œæ€»ä¹‹å°±æ˜¯å„ç§çŠ¶æ€ä¸å¥½ã€‚å¾®åšä¸Šçœ‹åˆ°ä¸Šä¸ªæœˆæ˜¯æ°´é€†ï¼Œçœ‹æ¥æˆ‘ä¹Ÿæ˜¯å—ç¾ç¾¤ä¼—äº†ã€‚ğŸ˜å•é¡µåº”ç”¨çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯..." data-title=" QQ"><i class="icon icon-qq"></i></a></li><li><a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://imys.net/20170507/data-sync-in-vue-single-page-application.html" data-title=" Facebook"><i class="icon icon-facebook"></i></a></li><li><a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠVueå•é¡µåº”ç”¨ä¸­çš„æ•°æ®åŒæ­¥æ¢ç´¢ã€‹ â€” Yusen's Blog&url=http://imys.net/20170507/data-sync-in-vue-single-page-application.html&via=http://imys.net" data-title=" Twitter"><i class="icon icon-twitter"></i></a></li><li><a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://imys.net/20170507/data-sync-in-vue-single-page-application.html" data-title=" Google+"><i class="icon icon-google-plus"></i></a></li></ul></div><div class="page-modal wx-share" id="wxShare"><a class="close" href="javascript:;"><i class="icon icon-close"></i></a><p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACw0lEQVR42u3a0W7bMAwF0Pz/T29Anzastu+lpDQDjp+KxLJ1FEBiSb5e8fXr67r/5GrUn1d+fzKHbRceHh7eaOpX19WL7++/n9D9ne18HhYRDw8P7xjvfhJXL0juvN/6k7H3ox4seHh4eD/Ky4PmfBNvjyI8PDy8/5eXb9ZJ+J48GQ8PD+/TeMk2nR8S+QLlwfTxXAseHh5ezGsLYJ/w98H6Hh4eHt5CVb09JGaJ3TZ8L2aLh4eHd4CXp2LzMn9+T9s6MGzYwsPDwzvAWy+DtdNqFzRfpiNVPjw8PLx/npNvu3mAO1uyPO1bHD94eHh4W3mzslZbxJqliduUxDdPw8PDwzvGm23feTm/TebOguzX+i+Dh4eHN8pttunX9lCZhd0J6SGkxsPDw9vEyzflWYEqD5RXjqK6yoeHh4e3zGu39Tw1kLy+TUPkC4GHh4d3jpcHrG3TQJ6S2BXK4+Hh4b2Hlz9iFhAPV7psurp8Ox4eHt4B3sp5kh8kbQFs11GEh4eHt5eXlKbyz9tv80/y9Mdfi4uHh4d3gDdrqMqbAPKAu6UW9+Ph4eFt5eWDl7oSRgmIGQkPDw/vNG9Xe1NeyF9JWwyXDw8PD+8AL3lZnnKdLVbeRtA2E+Dh4eGd4BWVsWVkPjZvzMLDw8P7NF6+TeebeL4o7c9w+R8DHh4e3iZesb3GrU6zLT5J1NZj8fDw8N7CSzb6NkEwS0C0JbEop4uHh4e3zJs1CrSBcl6gahO+eHh4eO/nzbb+tqzVNhPkzVUPRTs8PDy8A7y20DVrMkimuzcNgYeHh3eat+swSJIU7RSTOdT1PTw8PLxNvDa1mrcOrC/T0qGFh4eH96O8XUdCnphov/3GgoeHh/cxvDzpsJJgvV+sqM0LDw8P7xgvD4XbuvyszStfsodFxMPDwzvAawesJFhnx8/mah4eHh7enPcbLU6Sl9c3P3EAAAAASUVORK5CYII=" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç "></div><script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script><script>var BLOG={ROOT:"/",SHARE:!0,REWARD:!0};</script><script src="/js/main.min.js?v=1.6.10"></script><div class="search-panel" id="search-panel"><ul class="search-result" id="search-result"></ul></div><template id="search-tpl"><li class="item"><a href="{path}" class="waves-block waves-effect"><div class="title ellipsis" title="{title}">{title}</div><div class="flex-row flex-middle"><div class="tags ellipsis">{tags}</div><time class="flex-col time">{date}</time></div></a></li></template><script src="/js/search.min.js?v=1.6.10" async></script></body></html>