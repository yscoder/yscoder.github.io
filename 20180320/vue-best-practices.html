<!DOCTYPE html><html><head><!-- Google Analytics --><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-87940530-1","auto"),ga("send","pageview");</script><script async src="https://www.google-analytics.com/analytics.js"></script><!-- End Google Analytics --><meta charset="utf-8"><meta name="google-site-verification" content="rlxpN--EBnMOLJnY1efTuwShQId3YX7A6RWkQEr0y9c"><link rel="canonical" href="https://imys.net/20180320/vue-best-practices.html"><title>Vueæœ€ä½³å®è·µ | Yusen&#39;s Blog | å­¦ä¹ å¼¯é“è¶…è½¦çš„æŠ€å·§ï¼</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#3F51B5"><meta name="keywords" content="æŠ€å·§,Vue"><meta name="description" content="Vueæœ€ä½³å®è·µ"><meta property="og:type" content="article"><meta property="og:title" content="Vueæœ€ä½³å®è·µ"><meta property="og:url" content="http://imys.net/20180320/vue-best-practices.html"><meta property="og:site_name" content="Yusen's Blog"><meta property="og:description" content="Vueæœ€ä½³å®è·µ"><meta property="og:updated_time" content="2018-04-01T08:00:13.902Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Vueæœ€ä½³å®è·µ"><meta name="twitter:description" content="Vueæœ€ä½³å®è·µ"><link rel="alternate" type="application/atom+xml" title="Yusen&#39;s Blog" href="/atom.xml"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css?v=1.7.2"><script>window.lazyScripts=[];</script><!-- custom head --></head><body><div id="loading" class="active"></div><aside id="menu" class="hide"><div class="inner flex-row-vertical"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off"><i class="icon icon-lg icon-close"></i></a><div class="brand-wrap" style="background-image:url(/img/brand.jpg)"><div class="brand"><a href="/" class="avatar waves-effect waves-circle waves-light"><img src="/img/face.jpg"></a><hgroup class="introduce"><h5 class="nickname">ç‹æ˜±æ£®</h5><a href="mailto:634206017@qq.com" title="634206017@qq.com" class="mail">634206017@qq.com</a></hgroup></div></div><div class="scroll-wrap flex-col"><ul class="nav"><li class="waves-block waves-effect"><a href="/"><i class="icon icon-lg icon-home"></i> Home</a></li><li class="waves-block waves-effect"><a href="/archives"><i class="icon icon-lg icon-archives"></i> Archives</a></li><li class="waves-block waves-effect"><a href="/tags"><i class="icon icon-lg icon-tags"></i> Tags</a></li><li class="waves-block waves-effect"><a href="https://github.com/yscoder" target="_blank"><i class="icon icon-lg icon-github"></i> Github</a></li><li class="waves-block waves-effect"><a href="http://www.weibo.com/ysweb" target="_blank"><i class="icon icon-lg icon-weibo"></i> Weibo</a></li></ul></div></div></aside><main id="main"><header class="top-header" id="header"><div class="flex-row"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle"><i class="icon icon-lg icon-navicon"></i></a><div class="flex-col header-title ellipsis">Vueæœ€ä½³å®è·µ</div><div class="search-wrap" id="search-wrap"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back"><i class="icon icon-lg icon-chevron-left"></i></a> <input id="key" class="search-input" autocomplete="off" placeholder="è¾“å…¥æ„Ÿå…´è¶£çš„å…³é”®å­—"> <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search"><i class="icon icon-lg icon-search"></i></a></div><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare"><i class="icon icon-lg icon-share-alt"></i></a></div></header><header class="content-header post-header"><div class="container fade-scale"><h1 class="title">Vueæœ€ä½³å®è·µ</h1><h5 class="subtitle"><time datetime="2018-03-20T12:18:51.000Z" itemprop="datePublished" class="page-time">2018å¹´03æœˆ20æ—¥</time></h5></div></header><div class="container body-wrap"><aside class="post-widget"><nav class="post-toc-wrap post-toc-shrink" id="post-toc"><h4>TOC</h4><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#this-å¼•ç”¨"><span class="post-toc-number">1.</span> <span class="post-toc-text">this å¼•ç”¨</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#å±æ€§ç»‘å®š"><span class="post-toc-number">2.</span> <span class="post-toc-text">å±æ€§ç»‘å®š</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#åŒå‘ç»‘å®š"><span class="post-toc-number">3.</span> <span class="post-toc-text">åŒå‘ç»‘å®š</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#é‡Šæ”¾èµ„æº"><span class="post-toc-number">4.</span> <span class="post-toc-text">é‡Šæ”¾èµ„æº</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ä¿®é¥°ç¬¦"><span class="post-toc-number">5.</span> <span class="post-toc-text">ä¿®é¥°ç¬¦</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#æ•°æ®è¯·æ±‚"><span class="post-toc-number">6.</span> <span class="post-toc-text">æ•°æ®è¯·æ±‚</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#å‡å°‘åµŒå¥—å±‚çº§"><span class="post-toc-number">7.</span> <span class="post-toc-text">å‡å°‘åµŒå¥—å±‚çº§</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#è¿‡æ»¤å™¨"><span class="post-toc-number">8.</span> <span class="post-toc-text">è¿‡æ»¤å™¨</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Props"><span class="post-toc-number">9.</span> <span class="post-toc-text">Props</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#v-if"><span class="post-toc-number">10.</span> <span class="post-toc-text">v-if</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#è·¯ç”±"><span class="post-toc-number">11.</span> <span class="post-toc-text">è·¯ç”±</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ç»§æ‰¿å’Œæ··åˆ"><span class="post-toc-number">12.</span> <span class="post-toc-text">ç»§æ‰¿å’Œæ··åˆ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ç¬¬ä¸‰æ–¹åº“çš„é›†æˆ"><span class="post-toc-number">13.</span> <span class="post-toc-text">ç¬¬ä¸‰æ–¹åº“çš„é›†æˆ</span></a></li></ol></nav></aside><article id="post-vue-best-practices" class="post-article article-type-post fade" itemprop="blogPost"><div class="post-card"><h1 class="post-card-title">Vueæœ€ä½³å®è·µ</h1><div class="post-meta"><time class="post-time" title="2018å¹´03æœˆ20æ—¥ 20:18:51" datetime="2018-03-20T12:18:51.000Z" itemprop="datePublished">2018å¹´03æœˆ20æ—¥</time></div><div class="post-content" id="post-content" itemprop="postContent"><blockquote><p>è®°å½•æˆ‘åœ¨ä½¿ç”¨ Vue ä¸­å‘ç°çš„ä¸€äº›å¥½çš„ä»£ç å®è·µï¼Œå¸Œæœ›èƒ½å¤Ÿä¿æŒæ›´æ–°ã€‚ğŸ¤ </p></blockquote><a id="more"></a><h2 id="this-å¼•ç”¨"><a href="#this-å¼•ç”¨" class="headerlink" title="this å¼•ç”¨"></a>this å¼•ç”¨</h2><p>åœ¨ç»„ä»¶ä½œç”¨åŸŸå†…ä½¿ç”¨ç®­å¤´å‡½æ•°å¯ä»¥ä¿è¯ <code>this</code> æ°¸è¿œæŒ‡å‘ç»„ä»¶æœ¬èº«ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    data() &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">msg</span>: <span class="string">'hello'</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">methods</span>: &#123;</div><div class="line">        hello() &#123;</div><div class="line">            setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="keyword">this</span>.msg) <span class="comment">// this æŒ‡å‘ window</span></div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    data() &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">msg</span>: <span class="string">'hello'</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">methods</span>: &#123;</div><div class="line">        hello() &#123;</div><div class="line">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="keyword">this</span>.msg) <span class="comment">// this æŒ‡å‘ç»„ä»¶</span></div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="å±æ€§ç»‘å®š"><a href="#å±æ€§ç»‘å®š" class="headerlink" title="å±æ€§ç»‘å®š"></a>å±æ€§ç»‘å®š</h2><p>ç»‘å®šå­—ç¬¦ä¸²ä¸éœ€è¦åŠ å†’å·ã€‚</p><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:str</span>=<span class="string">"'hello'"</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">str</span>=<span class="string">"hello"</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></div></pre></td></tr></table></figure><p>å¸ƒå°”å±æ€§çœç•¥å€¼æ—¶é»˜è®¤ä¸º <code>true</code>ã€‚</p><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">my-modal</span> <span class="attr">visible</span>&gt;</span><span class="tag">&lt;/<span class="name">my-modal</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--ç­‰ä»·äº--&gt;</span></div><div class="line"><span class="comment">&lt;!--&lt;my-modal :visible="true"&gt;&lt;/my-modal&gt;--&gt;</span></div></pre></td></tr></table></figure><p>ç»‘å®šæ— å‚å‡½æ•°ä¸éœ€è¦åŠ æ‹¬å·ã€‚</p><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="comment">&lt;!-- badï¼Œæ‹¬å·å¤šä½™ --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"onClick()"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- goodï¼Œéšå¼ä¼ é€’äº† event å¯¹è±¡ --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"onClick"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure><p>åªæœ‰ä¸€è¡Œä»£ç çš„äº‹ä»¶å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥å†™æ ‡ç­¾ä¸Šã€‚</p><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"visible = true"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure><h2 id="åŒå‘ç»‘å®š"><a href="#åŒå‘ç»‘å®š" class="headerlink" title="åŒå‘ç»‘å®š"></a>åŒå‘ç»‘å®š</h2><p>è¡¨å•ç»„ä»¶ä¸€èˆ¬éƒ½æ”¯æŒåŒå‘ç»‘å®šï¼Œå®é™…åœºæ™¯ä¸­è¡¨å•ç»„ä»¶å€¼å‘ç”Ÿå˜åŒ–å¾€å¾€è¦åœ¨ <code>POST or PUT</code> è¯·æ±‚ä¹‹åã€‚å¦‚æœç›´æ¥åœ¨ <code>v-model</code> ç»‘å®šåŸå§‹å€¼å¾€å¾€ä¼šæ‰“ç ´å•å‘æ•°æ®æµã€‚</p><p>ä½¿ç”¨è®¡ç®—å±æ€§çš„ <code>get/set</code> æ–¹å¼å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ï¼ˆä¹Ÿé€‚ç”¨ <code>.sync</code>ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="attr">template</span>: <span class="string">`</span></div><div class="line">        &lt;div&gt;</div><div class="line">            &lt;input type="radio" v-model="nameVal" value="1"&gt;</div><div class="line">            &lt;input type="radio" v-model="nameVal" value="2"&gt;</div><div class="line">        &lt;/div&gt;`,</div><div class="line">    data() &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">name</span>: <span class="string">''</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">computed</span>: &#123;</div><div class="line">        <span class="attr">nameVal</span>: &#123;</div><div class="line">            get() &#123;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">this</span>.name</div><div class="line">            &#125;,</div><div class="line">            set(val) &#123;</div><div class="line">                <span class="keyword">this</span>.edit(val)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">methods</span>: &#123;</div><div class="line">        edit(name) &#123;</div><div class="line">            <span class="keyword">this</span>.$http.put(<span class="string">'/name'</span>, &#123; name &#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</div><div class="line">                <span class="keyword">this</span>.name = name</div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    created() &#123;</div><div class="line">        <span class="keyword">this</span>.$http.get(<span class="string">'/name'</span>).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</div><div class="line">            <span class="keyword">this</span>.name = data.name</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="é‡Šæ”¾èµ„æº"><a href="#é‡Šæ”¾èµ„æº" class="headerlink" title="é‡Šæ”¾èµ„æº"></a>é‡Šæ”¾èµ„æº</h2><p>å–„ç”¨ <code>destory</code> é‡Šæ”¾åŸç”Ÿäº‹ä»¶ã€ç¬¬ä¸‰æ–¹ç»„ä»¶ã€å…¨å±€äº‹ä»¶æ€»çº¿ç­‰ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> bus <span class="keyword">from</span> <span class="string">'event-bus'</span></div><div class="line"><span class="keyword">import</span> plugin <span class="keyword">from</span> <span class="string">'plugin'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">    created() &#123;</div><div class="line">        bus.$on(<span class="string">'hello'</span>, <span class="keyword">this</span>.hello) <span class="comment">// æ³¨å†Œå…¨å±€äº‹ä»¶</span></div><div class="line">        <span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, <span class="keyword">this</span>.onResize) <span class="comment">// DOM äº‹ä»¶</span></div><div class="line">        plugin.init() <span class="comment">// ç¬¬ä¸‰æ–¹ç»„ä»¶åˆå§‹åŒ–</span></div><div class="line">    &#125;,</div><div class="line">    destoryed() &#123;</div><div class="line">        bus.$off(<span class="string">'hello'</span>, <span class="keyword">this</span>.hello)</div><div class="line">        <span class="built_in">window</span>.removeEventListener(<span class="string">'resize'</span>, <span class="keyword">this</span>.onResize)</div><div class="line">        plugin.destory()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h2><p>Vue å†…ç½®äº†è®¸å¤šå¸¸ç”¨ä¿®é¥°ç¬¦å¯ä»¥è®©ä½ å°‘å†™å‡ è¡Œä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="comment">&lt;!-- è¾“å…¥å­—ç¬¦ä¸²è½¬æ•°å­— --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model.number</span>=<span class="string">"value"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- è¾“å…¥å­—ç¬¦ä¸²å»å‰åç©ºæ ¼ --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model.trim</span>=<span class="string">"value"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- ç›‘å¬é¼ æ ‡æŒ‰é”®ï¼Œæ”¯æŒ left, right, middle --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.left</span>=<span class="string">"onLeftClick"</span>&gt;</span>ç‚¹å‡»é¼ æ ‡å·¦é”®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.right</span>=<span class="string">"onRightClick"</span>&gt;</span>ç‚¹å‡»é¼ æ ‡å³é”®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- åœæ­¢å†’æ³¡ï¼Œé˜»æ­¢é»˜è®¤è¡Œä¸º --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.stop.prevent</span>=<span class="string">"doThis"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- é”®ç›˜æŒ‰ä¸‹ç¡®è®¤é”®ï¼Œæ”¯æŒ keycode å’Œé”®åˆ«å --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.13</span>=<span class="string">"onEnter"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- åªæ‰§è¡Œä¸€æ¬¡äº‹ä»¶ --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.once</span>=<span class="string">"doThis"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- ç›‘å¬åŸç”Ÿäº‹ä»¶ --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click.native</span>=<span class="string">"doThis"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></div></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯ä¸€äº›å¸¸ç”¨çš„ä¿®é¥°ç¬¦ï¼Œæ›´å¤šç”¨æ³•å¯ä»¥å»æ–‡æ¡£ä¸Šæ‰¾æ‰¾ã€‚</p><h2 id="æ•°æ®è¯·æ±‚"><a href="#æ•°æ®è¯·æ±‚" class="headerlink" title="æ•°æ®è¯·æ±‚"></a>æ•°æ®è¯·æ±‚</h2><p>åˆ‡æ¢è·¯ç”±è¯·æ±‚æ•°æ®æ—¶ï¼Œä¸€èˆ¬éƒ½éœ€è¦å…¼å®¹ä¸¤ç§è§†å›¾æ‰“å¼€æ–¹å¼ï¼šè·¯ç”±è·³è½¬å’Œç›´æ¥ URL è¾“å…¥ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="attr">watch</span>: &#123;</div><div class="line">        $route() &#123;</div><div class="line">            <span class="keyword">this</span>.fetchData()</div><div class="line">        &#125;,</div><div class="line">    &#125;,</div><div class="line">    methods() &#123;</div><div class="line">        fetchData() &#123;</div><div class="line">            <span class="comment">// é¿å…é‡å¤è¯·æ±‚</span></div><div class="line">            <span class="keyword">if</span>(<span class="keyword">this</span>.isLoading) <span class="keyword">return</span></div><div class="line">            <span class="keyword">this</span>.isLoading = <span class="literal">true</span></div><div class="line">            <span class="comment">// è¯·æ±‚æ•°æ®</span></div><div class="line">            <span class="comment">// ajax...</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    created() &#123;</div><div class="line">        <span class="keyword">this</span>.fetchData()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è·¯ç”±è·³è½¬ä¼šè§¦å‘ <code>watch -&gt; $route</code>ï¼Œå¦‚æœæ˜¯æœªåˆ›å»ºçš„ç»„ä»¶è¿˜ä¼šè§¦å‘ <code>create</code>ï¼Œç›´æ¥ URL åªä¼šè§¦å‘ <code>created</code> é’©å­ã€‚ä¸€èˆ¬åœ¨ä¸¤ä¸ªä½ç½®éƒ½æ‰§è¡Œæ•°æ®è¯·æ±‚ï¼Œå†é€šè¿‡åˆ¤æ–­é¿å…é‡å¤è¯·æ±‚ï¼Œè¿˜å¯ä»¥åˆ©ç”¨ <code>isLoading</code> æ ‡è®°åšåŠ è½½åŠ¨ç”»ã€‚å¦‚æœä½¿ç”¨äº† <code>keep-alive</code> ç»„ä»¶ï¼Œè¿˜éœ€è¦è€ƒè™‘ <code>activated</code> é’©å­ã€‚</p><h2 id="å‡å°‘åµŒå¥—å±‚çº§"><a href="#å‡å°‘åµŒå¥—å±‚çº§" class="headerlink" title="å‡å°‘åµŒå¥—å±‚çº§"></a>å‡å°‘åµŒå¥—å±‚çº§</h2><p>ç»„ä»¶å³ä½¿æœªåœ¨ <code>props</code> å£°æ˜ï¼Œä¹Ÿå¯ä»¥ä¼ é€’ä¸€äº›åŸç”Ÿ DOM å±æ€§ã€‚</p><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content-view"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">class</span>=<span class="string">"content-view"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></div></pre></td></tr></table></figure><p>å‘½åæ’æ§½ä¸­éœ€è¦æ”¾ç½®å¤šä¸ªå—æ—¶ï¼Œå¯ä»¥åˆ©ç”¨ <code>template</code> ç»„ä»¶ã€‚</p><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="comment">&lt;!-- bad --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">my-component</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"hello"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"block1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"block2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- good --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">my-component</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot</span>=<span class="string">"hello"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"block1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"block2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></div></pre></td></tr></table></figure><p>ä¸ç®¡æ˜¯å†…ç½®ç»„ä»¶è¿˜æ˜¯è‡ªå·±çš„ç»„ä»¶ï¼Œæœ‰æ—¶å€™ä¸éœ€è¦å¤šä¸€å±‚åŒ…è£¹å»æ·»åŠ æ ·å¼ï¼Œåè€Œå› æ­¤å¢åŠ äº†åµŒå¥—å±‚çº§ã€‚</p><h2 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h2><p>è¿‡æ»¤å™¨çš„æœ€ä½³åº”ç”¨åœºæ™¯åº”è¯¥æ˜¯å€¼çš„è½¬æ¢ï¼Œæ¯”å¦‚ï¼š<code>Date</code> ç±»å‹æ—¥æœŸè½¬å­—ç¬¦ä¸²ã€è´§å¸ã€å­—ç¬¦æˆªæ–­ã€markdown ç­‰ç­‰ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// æŒ‰é•¿åº¦æˆªæ–­æ–‡å­—ï¼Œè¡¥...ï¼Œä¸­æ–‡ = 2</span></div><div class="line"><span class="keyword">const</span> cnReg = <span class="regexp">/[\u4e00-\u9fa5]/</span></div><div class="line">Vue.filter(<span class="string">'ellipsis'</span>, (str, len = <span class="number">10</span>) =&gt; &#123;</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span></div><div class="line">    <span class="keyword">let</span> j = <span class="number">0</span></div><div class="line">    <span class="keyword">let</span> ret = <span class="string">''</span></div><div class="line">    <span class="keyword">const</span> text = <span class="built_in">String</span>(str).trim()</div><div class="line">    <span class="keyword">const</span> max = text.length</div><div class="line">    <span class="keyword">while</span> (j &lt; max &amp;&amp; i &lt; len) &#123;</div><div class="line">        <span class="keyword">const</span> c = text.charAt(j)</div><div class="line">        ret += c</div><div class="line">        j += <span class="number">1</span></div><div class="line">        i = cnReg.test(c) ? i + <span class="number">2</span> : i + <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ret === text ? text : <span class="string">`<span class="subst">$&#123;ret&#125;</span>...`</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// æ—¥æœŸè½¬ç›¸å¯¹æ—¶é—´</span></div><div class="line">Vue.filter(<span class="string">'calendar'</span>, value =&gt; moment(value).calendar())</div></pre></td></tr></table></figure><h2 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h2><ul><li>å¸ƒå°”å±æ€§é»˜è®¤å€¼ä¸º <code>false</code> å¯ä»¥çœç•¥</li><li>æ•°ç»„æœ€å¥½å£°æ˜é»˜è®¤å€¼ <code>[]</code>ï¼Œä¿è¯æ•°æ®è¯·æ±‚æˆåŠŸå‰æ¨¡ç‰ˆé‡Œçš„ <code>v-for</code> ä¸ä¼šå‡ºé”™</li><li>å¯¹è±¡ä¹Ÿéœ€è¦æ³¨æ„æ˜¯å¦å£°æ˜äº†é»˜è®¤å€¼ <code>{}</code>ï¼Œé¿å…æ¨¡ç‰ˆä¸­ä½¿ç”¨ <code>obj.xx</code> æŠ¥é”™</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">props</span>: &#123;</div><div class="line">        <span class="attr">visible</span>: Boolen, <span class="comment">// é»˜è®¤å³ä¸º false</span></div><div class="line">        data: <span class="built_in">Array</span>,     <span class="comment">// éœ€è¦è¿›è¡Œéç©ºåˆ¤æ–­</span></div><div class="line">        data2: &#123;         <span class="comment">// å¯å®‰å…¨ä½¿ç”¨ v-for</span></div><div class="line">            type: <span class="built_in">Array</span>,</div><div class="line">            <span class="attr">default</span>: []</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">obj</span>: <span class="built_in">Object</span>,     <span class="comment">// éœ€è¦è¿›è¡Œéç©ºåˆ¤æ–­</span></div><div class="line">        obj2: &#123;          <span class="comment">// å¯å®‰å…¨ä½¿ç”¨ obj.xx</span></div><div class="line">            type: <span class="built_in">Object</span>,</div><div class="line">            <span class="keyword">default</span>() &#123;</div><div class="line">                <span class="keyword">return</span> &#123;&#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a>v-if</h2><p>å¦‚æœæ¨¡ç‰ˆä¸­ç»‘å®šäº† <code>obj.xx</code> æ—¶ï¼Œéœ€è¦æ³¨æ„ <code>obj</code> æ˜¯å¦æ˜¯å¼‚æ­¥æ•°æ®ï¼Œé»˜è®¤å€¼æ˜¯å¦ä¸º <code>null</code>ã€‚å®‰å…¨èµ·è§ï¼Œå¯åœ¨ç»„ä»¶æœ€å¤–å±‚åŠ  <code>v-if</code> åˆ¤æ–­ã€‚</p><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"!!obj"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;obj.name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;obj.age&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    data() &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">obj</span>: <span class="literal">null</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure><h2 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h2><p>å¯¹äºç»å¸¸å‘ç”Ÿå˜åŒ–çš„ä¸€çº§ã€äºŒçº§èœå•å¯¼èˆªï¼Œå¯ä»¥å’Œè·¯ç”±æ•°æ®ç»“åˆèµ·æ¥ï¼ŒæŒ‰æ¨¡å—åˆ’åˆ†ï¼Œè§†å›¾ç›´æ¥å¼•ç”¨å¯¹åº”æ¨¡å—çš„è·¯ç”±æ•°æ®æ¥ç”Ÿæˆå¯¼èˆªï¼Œå‡å°‘ç»´æŠ¤æˆæœ¬ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// routes.js</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> settingRoutes = []</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> userRoutes = []</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> [...settingRoutes, ...userRoutes]</div></pre></td></tr></table></figure><p>èœå•ç»„ä»¶ä¸­ï¼š</p><figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in menus"</span> <span class="attr">:key</span>=<span class="string">"item.name"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"item"</span>&gt;</span>&#123;&#123;item.text&#125;&#125;<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">import</span> &#123; settingRoutes &#125; <span class="keyword">from</span> <span class="string">'../routes'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    data() &#123;</div><div class="line">        <span class="attr">menus</span>: settingRoutes</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure><h2 id="ç»§æ‰¿å’Œæ··åˆ"><a href="#ç»§æ‰¿å’Œæ··åˆ" class="headerlink" title="ç»§æ‰¿å’Œæ··åˆ"></a>ç»§æ‰¿å’Œæ··åˆ</h2><p>ç”¨è¿‡<code>ElementUI</code>çš„åŒå­¦ï¼Œéƒ½çŸ¥é“å…¶ <a href="http://element-cn.eleme.io/#/zh-CN/component/dialog" target="_blank" rel="external">Dialog ç»„ä»¶</a> æ˜¯ä¸æ”¯æŒå‚ç›´å±…ä¸­ï¼Œåªæä¾›äº†ä¸€ä¸ª<code>top</code>å±æ€§ç”¨äºè®¾ç½®ç»„ä»¶å†…å®¹èŠ‚ç‚¹åˆ°é¡¶éƒ¨çš„è·ç¦»ã€‚æ—©æœŸ <a href="http://element-cn.eleme.io/1.4/#/zh-CN/component/dialog" target="_blank" rel="external">1.x</a> ç‰ˆæœ¬æ—¶ Dialog ç»„ä»¶ä¹Ÿä¸æ”¯æŒ<code>append-to-body</code>ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»§æ‰¿å’Œæ··åˆæ¥æ‰©å±•è¿™äº›éœ€è¦çš„ç‰¹æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// dialogEx.js</span></div><div class="line"><span class="keyword">import</span> &#123; Dialog &#125; <span class="keyword">from</span> <span class="string">'element-ui'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'ElDialogEx'</span>,</div><div class="line">    <span class="attr">extends</span>: Dialog,</div><div class="line">    <span class="attr">props</span>: &#123;</div><div class="line">        <span class="attr">appendToBody</span>: &#123;</div><div class="line">            <span class="comment">// æŠŠç»„ä»¶æ’å…¥ body ä¸‹</span></div><div class="line">            type: <span class="built_in">Boolean</span>,</div><div class="line">            <span class="attr">default</span>: <span class="literal">true</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">center</span>: <span class="built_in">Boolean</span> <span class="comment">// è®¾ç½®å‚ç›´å±…ä¸­</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">computed</span>: &#123;</div><div class="line">        sizeClass() &#123;</div><div class="line">            <span class="comment">// è¿™ä¸ª sizeClass è®¡ç®—å±æ€§æ˜¯ç»„ä»¶æºç é‡Œå°±æœ‰çš„ï¼Œè¿™é‡Œæ˜¯åˆ©ç”¨äº†ç±»åæ”¯æŒå­—ç¬¦ä¸²æ‹¼æ¥çš„ç‰¹æ€§ï¼Œåœ¨è¿™ä¸ªå‡½æ•°é‡Œå¢åŠ äº†å‚ç›´å±…ä¸­çš„è‡ªå®šä¹‰ç±»æ‹¼æ¥</span></div><div class="line">            <span class="keyword">return</span> <span class="string">`el-dialog--<span class="subst">$&#123;<span class="keyword">this</span>.size&#125;</span>`</span> + <span class="keyword">this</span>.center ? <span class="string">' dialog-center '</span> : <span class="string">''</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    mounted() &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.appendToBody) <span class="built_in">document</span>.body.appendChild(<span class="keyword">this</span>.$el)</div><div class="line">    &#125;,</div><div class="line">    beforeDestroy() &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.appendToBody) <span class="keyword">this</span>.$el.parentNode.remove(<span class="keyword">this</span>.$el)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä¹‹åä½ åˆå‘ç°ï¼Œåœ¨å…¶ä»–çš„ä¸€äº›ç»„ä»¶ä¸­ä¹Ÿéœ€è¦<code>appendToBody</code>è¿™ä¸ªç‰¹æ€§ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠç›¸å…³çš„ä»£ç å†™æˆ<code>mixins</code>ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// appendToBody.js</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="attr">props</span>: &#123;</div><div class="line">        <span class="attr">appendToBody</span>: &#123;</div><div class="line">            <span class="comment">// æŠŠç»„ä»¶æ’å…¥ body ä¸‹</span></div><div class="line">            type: <span class="built_in">Boolean</span>,</div><div class="line">            <span class="attr">default</span>: <span class="literal">true</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    mounted() &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.appendToBody) <span class="built_in">document</span>.body.appendChild(<span class="keyword">this</span>.$el)</div><div class="line">    &#125;,</div><div class="line">    beforeDestroy() &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.appendToBody) <span class="keyword">this</span>.$el.parentNode.remove(<span class="keyword">this</span>.$el)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ç°åœ¨<code>dialogEx</code>ç»„ä»¶å¯ä»¥å†™çš„æ›´ç®€å•ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// dialogEx.js</span></div><div class="line"><span class="keyword">import</span> &#123; Dialog &#125; <span class="keyword">from</span> <span class="string">'element-ui'</span></div><div class="line"><span class="keyword">import</span> appendToBody <span class="keyword">from</span> <span class="string">'mixins/appendToBody'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'ElDialogEx'</span>,</div><div class="line">    <span class="attr">extends</span>: Dialog,</div><div class="line">    <span class="attr">mixins</span>: [appendToBody],</div><div class="line">    <span class="attr">props</span>: &#123;</div><div class="line">        <span class="attr">center</span>: <span class="built_in">Boolean</span> <span class="comment">// è®¾ç½®å‚ç›´å±…ä¸­</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">computed</span>: &#123;</div><div class="line">        sizeClass() &#123;</div><div class="line">            <span class="comment">// è¿™ä¸ª sizeClass è®¡ç®—å±æ€§æ˜¯ç»„ä»¶æºç é‡Œå°±æœ‰çš„ï¼Œè¿™é‡Œæ˜¯åˆ©ç”¨äº†ç±»åæ”¯æŒå­—ç¬¦ä¸²æ‹¼æ¥çš„ç‰¹æ€§ï¼Œåœ¨è¿™ä¸ªå‡½æ•°é‡Œå¢åŠ äº†å‚ç›´å±…ä¸­çš„è‡ªå®šä¹‰ç±»æ‹¼æ¥</span></div><div class="line">            <span class="keyword">return</span> <span class="string">`el-dialog--<span class="subst">$&#123;<span class="keyword">this</span>.size&#125;</span>`</span> + <span class="keyword">this</span>.center ? <span class="string">' dialog-center '</span> : <span class="string">''</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="ç¬¬ä¸‰æ–¹åº“çš„é›†æˆ"><a href="#ç¬¬ä¸‰æ–¹åº“çš„é›†æˆ" class="headerlink" title="ç¬¬ä¸‰æ–¹åº“çš„é›†æˆ"></a>ç¬¬ä¸‰æ–¹åº“çš„é›†æˆ</h2><p>ç¬¬ä¸‰æ–¹åº“ä¸€èˆ¬æ˜¯ä¼ ç»Ÿçš„åŸºäº DOM å’ŒåŸç”Ÿ jsã€‚å®ƒä»¬è™½ç„¶å†™èµ·æ¥æ²¡æœ‰ä½¿ç”¨ä»»ä½•çš„ä»£ç æ¨¡ç‰ˆï¼Œä½†å‡ºäºä½œè€…çš„ç¼–ç¨‹ç»éªŒå…¶å®éƒ½ç¬¦åˆäº†å¤§ä¼—ä½¿ç”¨é¢„æœŸã€‚</p><p>ä»»ä½•ä¸€ä¸ªåº“ä¸€èˆ¬éƒ½ä¼šæä¾›ä»¥ä¸‹çš„æ¥å£ï¼š</p><ul><li>ä½¿ç”¨è‡ªå®šä¹‰é…ç½®åˆå§‹åŒ–</li><li>å¯è®¿é—®çš„å±æ€§</li><li>å¯è°ƒç”¨çš„åŠŸèƒ½å‡½æ•°</li><li>äº‹ä»¶ç»‘å®š</li><li>è‰¯å¥½çš„ç”Ÿå‘½å‘¨æœŸé’©å­</li></ul><blockquote><p>å¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„ç¼–ç¨‹ç»éªŒç”¨åŸç”Ÿ js å»å†™ä¸€ä¸ªæ’ä»¶å¯èƒ½æœ€åå°±æ˜¯ä¸€å›¢ä¹±éº»ã€‚è¿™ä¹Ÿæ˜¯ Vue ç­‰ä¼—å¤šå‰ç«¯æ¡†æ¶çš„ä½œç”¨ï¼Œå®ƒä»¬çº¦æŸäº†ä¸€ä¸ªæ¨¡å—çš„ä»£ç æ¨¡ç‰ˆï¼Œæä¾›äº†äº‹ä»¶ç®¡ç†ã€ç”Ÿå‘½å‘¨æœŸè¿è¡Œã€å±æ€§å’Œå‡½æ•°çš„å®šä¹‰ï¼Œä½¿å³ä½¿ç»éªŒä¸è¶³çš„äººä¹Ÿèƒ½å†™å‡ºä¸€ä¸ªçœ‹å¾—è¿‡å»çš„æ¨¡å—ã€‚</p></blockquote><p>æŠŠç¬¬ä¸‰æ–¹åº“è½¬æ¢ä¸ºä¸€ä¸ª Vue ç»„ä»¶ï¼Œå…¶å®å°±æ˜¯æŠŠè¿™ä¸ªåº“çš„æ¥å£æŒ‚åˆ° Vue ç»„ä»¶å¯¹åº”çš„ç»„ä»¶é€‰é¡¹ä¸Šå»ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> Lib <span class="keyword">from</span> <span class="string">'lib'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="attr">props</span>: &#123;</div><div class="line">        <span class="attr">options</span>: <span class="built_in">Object</span></div><div class="line">    &#125;,</div><div class="line">    data() &#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">instance</span>: <span class="literal">null</span></div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">methods</span>: &#123;</div><div class="line">        doSomething(xxx) &#123;</div><div class="line">            <span class="comment">// lib çš„æ“ä½œå‡½æ•°</span></div><div class="line">            <span class="comment">// å¤–éƒ¨ä½¿ç”¨ $refs è°ƒç”¨</span></div><div class="line">            <span class="keyword">this</span>.instance.doSomething(xxx)</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">computed</span>: &#123;</div><div class="line">        libProp() &#123;</div><div class="line">            <span class="comment">// lib çš„å¯è®¿é—®å±æ€§ä½¿ç”¨è®¡ç®—å±æ€§è®¿é—®</span></div><div class="line">            <span class="comment">// å¤–éƒ¨ä½¿ç”¨ $refs è°ƒç”¨</span></div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.instance.prop</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">watch</span>: &#123;</div><div class="line">        options(val) &#123;</div><div class="line">            <span class="comment">// ç›‘å¬é…ç½®æ›´æ–°ï¼Œè°ƒç”¨ lib æ¥å£æ›´æ–°é…ç½®</span></div><div class="line">            <span class="keyword">if</span> (val) <span class="keyword">this</span>.instance.updateOptions(val)</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    mounted() &#123;</div><div class="line">        <span class="comment">// mounted æˆ–è€… created å¯¹åº” lib å®ä¾‹åŒ–å¹¶ä¼ å…¥è‡ªå®šä¹‰é…ç½®</span></div><div class="line">        <span class="keyword">this</span>.instance = <span class="keyword">new</span> Lib(<span class="keyword">this</span>.$el, <span class="keyword">this</span>.options)</div><div class="line">        <span class="comment">// lib å†…çš„äº‹ä»¶ $emit å‡ºå»ï¼Œå¤–éƒ¨ç›‘å¬</span></div><div class="line">        <span class="keyword">this</span>.instance.on(<span class="string">'update'</span>, (...args) =&gt; &#123;</div><div class="line">            <span class="keyword">this</span>.$emit(<span class="string">'update'</span>, ...args)</div><div class="line">        &#125;)</div><div class="line">    &#125;,</div><div class="line">    destroyed() &#123;</div><div class="line">        <span class="comment">// lib å¦‚æœæä¾›äº† destroy ç­‰é”€æ¯èµ„æºçš„å‡½æ•°ä¸€èˆ¬éƒ½ä¼šå¯¹å…¶å†…éƒ¨çš„ DOM äº‹ä»¶è§£ç»‘</span></div><div class="line">        <span class="keyword">this</span>.instance.destroy()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä¹Ÿå¯èƒ½ä½ æƒ³æŠŠä¸€ä¸ªåº“å˜ä¸ºä¸€ä¸ª Vue æŒ‡ä»¤ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> Lib <span class="keyword">from</span> <span class="string">'lib'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    install(Vue, option = &#123;&#125;) &#123;</div><div class="line">        <span class="comment">// å­˜æ”¾å…¨å±€é…ç½®</span></div><div class="line">        <span class="keyword">const</span> defaults = option</div><div class="line"></div><div class="line">        Vue.directive(<span class="string">'my-directive'</span>, &#123;</div><div class="line">            bind(el, &#123; value &#125;) &#123;</div><div class="line">                <span class="comment">// å½“å‰é…ç½®æ··åˆå…¨å±€é…ç½®</span></div><div class="line">                <span class="keyword">const</span> options = <span class="built_in">Object</span>.assign(&#123;&#125;, defaults, value)</div><div class="line">                <span class="keyword">const</span> lib = <span class="keyword">new</span> Lib(el, options)</div><div class="line">                el._libInstace = lib <span class="comment">// ç¼“å­˜ lib å®ä¾‹</span></div><div class="line">            &#125;,</div><div class="line">            update(el, &#123; value &#125;, vnode) &#123;</div><div class="line">                <span class="comment">// æ›´æ–° lib é…ç½®</span></div><div class="line">                el._libInstace.setOptions(value)</div><div class="line">            &#125;,</div><div class="line">            unbind(el) &#123;</div><div class="line">                <span class="comment">// é”€æ¯ lib</span></div><div class="line">                el._libInstace.destroy()</div><div class="line">                <span class="keyword">delete</span> el._libInstace</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æŒ‡ä»¤æœ‰ç€å®Œå–„çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä½†åœ¨æ•°æ®ç®¡ç†ä¸Šåå¼±ã€‚ä¸€èˆ¬ç”¨äºå•ä¸€åŠŸèƒ½çš„é›†æˆï¼Œæˆ–è€…åªéœ€è¦ä¸€æ¬¡åˆå§‹åŒ–çš„æ’ä»¶ã€‚</p><blockquote><p>æŒ‡ä»¤ä¸­å¯é€šè¿‡ <code>el</code> æˆ– <code>el.dataset</code> è¿›è¡Œç”Ÿå‘½å‘¨æœŸé—´çš„æ•°æ®å…±äº«ã€‚</p></blockquote></div><blockquote class="post-copyright"><div class="content"><span class="post-time">æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2018-04-01T08:00:13.902Z" itemprop="dateUpdated">2018å¹´04æœˆ1æ—¥ 16:00:13</time></span><br>åŸå§‹é“¾æ¥ï¼š<a href="/20180320/vue-best-practices.html" target="_blank" rel="external">http://imys.net/20180320/vue-best-practices.html</a></div><footer><a href="http://imys.net"><img src="/img/face.jpg" alt="ç‹æ˜±æ£®"> ç‹æ˜±æ£®</a></footer></blockquote><div class="page-reward"><a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">èµ</a></div><div class="post-footer"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/">Vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æŠ€å·§/">æŠ€å·§</a></li></ul><div class="page-share-wrap"><div class="page-share" id="pageShare"><ul class="reset share-icons"><li><a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://imys.net/20180320/vue-best-practices.html&title=ã€ŠVueæœ€ä½³å®è·µã€‹ â€” Yusen's Blog&pic=http://imys.net/img/face.jpg" data-title="å¾®åš"><i class="icon icon-weibo"></i></a></li><li><a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡"><i class="icon icon-weixin"></i></a></li><li><a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://imys.net/20180320/vue-best-practices.html&title=ã€ŠVueæœ€ä½³å®è·µã€‹ â€” Yusen's Blog&source=è®°å½•æˆ‘åœ¨ä½¿ç”¨ Vue ä¸­å‘ç°çš„ä¸€äº›å¥½çš„ä»£ç å®è·µï¼Œå¸Œæœ›èƒ½å¤Ÿä¿æŒæ›´æ–°ã€‚ğŸ¤ " data-title=" QQ"><i class="icon icon-qq"></i></a></li><li><a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://imys.net/20180320/vue-best-practices.html" data-title=" Facebook"><i class="icon icon-facebook"></i></a></li><li><a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠVueæœ€ä½³å®è·µã€‹ â€” Yusen's Blog&url=http://imys.net/20180320/vue-best-practices.html&via=http://imys.net" data-title=" Twitter"><i class="icon icon-twitter"></i></a></li><li><a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://imys.net/20180320/vue-best-practices.html" data-title=" Google+"><i class="icon icon-google-plus"></i></a></li></ul></div><a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle"><i class="icon icon-share-alt icon-lg"></i></a></div></div></div><nav class="post-nav flex-row flex-justify-between flex-row-reverse"><div class="waves-block waves-effect next"><a href="/20180319/complex-spa-data-manage-ko.html" id="post-next" class="post-nav-link"><div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div><h4 class="title">å¤æ‚å•é¡µåº”ç”¨æ•°æ®ç®¡ç†æ€»ç»“</h4></a></div></nav><!-- Valine Comments --><div class="comments vcomment" id="comments"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><!-- Valine Comments script --><script>var GUEST_INFO=["nick","mail","link"],guest_info="nick,mail".split(",").filter(function(e){return GUEST_INFO.indexOf(e)>-1});new Valine({el:"#comments",notify:!1,verify:!1,appId:"R0tGuv7HFlmrAVTKtuX8ceT7-gzGzoHsz",appKey:"KgvkCCIDO9CXUe5khfHdrtew",avatar:"retro",placeholder:"è¦ä¸è¦è¯´ç‚¹ä»€ä¹ˆï¼Ÿ",guest_info:0==guest_info.length?GUEST_INFO:guest_info,pageSize:"20"});</script><!-- Valine Comments end --></article><div id="reward" class="page-modal reward-lay"><a class="close" href="javascript:;"><i class="icon icon-close"></i></a><h3 class="reward-title"><i class="icon icon-quote-left"></i> è¯·æˆ‘åƒè¾£æ¡~ <i class="icon icon-quote-right"></i></h3><div class="reward-content"><div class="reward-code"><img id="rewardCode" src="/img/wechat.jpg" alt="æ‰“èµäºŒç»´ç "></div><label class="reward-toggle"><input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg"><div class="reward-toggle-ctrol"><span class="reward-toggle-item wechat">å¾®ä¿¡</span> <span class="reward-toggle-label"></span> <span class="reward-toggle-item alipay">æ”¯ä»˜å®</span></div></label></div></div></div><footer class="footer"><div class="top"><p><span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span> <span>åšå®¢å†…å®¹éµå¾ª <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a></span></p></div><div class="bottom"><p><span>ç‹æ˜±æ£® &copy; 2015 - 2018</span> <span><a href="http://www.miitbeian.gov.cn/" target="_blank">è±«ICPå¤‡17023738å·-1</a><br>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></span></p></div></footer></main><div class="mask" id="mask"></div><a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a><div class="global-share" id="globalShare"><ul class="reset share-icons"><li><a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://imys.net/20180320/vue-best-practices.html&title=ã€ŠVueæœ€ä½³å®è·µã€‹ â€” Yusen's Blog&pic=http://imys.net/img/face.jpg" data-title="å¾®åš"><i class="icon icon-weibo"></i></a></li><li><a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡"><i class="icon icon-weixin"></i></a></li><li><a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://imys.net/20180320/vue-best-practices.html&title=ã€ŠVueæœ€ä½³å®è·µã€‹ â€” Yusen's Blog&source=è®°å½•æˆ‘åœ¨ä½¿ç”¨ Vue ä¸­å‘ç°çš„ä¸€äº›å¥½çš„ä»£ç å®è·µï¼Œå¸Œæœ›èƒ½å¤Ÿä¿æŒæ›´æ–°ã€‚ğŸ¤ " data-title=" QQ"><i class="icon icon-qq"></i></a></li><li><a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://imys.net/20180320/vue-best-practices.html" data-title=" Facebook"><i class="icon icon-facebook"></i></a></li><li><a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€ŠVueæœ€ä½³å®è·µã€‹ â€” Yusen's Blog&url=http://imys.net/20180320/vue-best-practices.html&via=http://imys.net" data-title=" Twitter"><i class="icon icon-twitter"></i></a></li><li><a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://imys.net/20180320/vue-best-practices.html" data-title=" Google+"><i class="icon icon-google-plus"></i></a></li></ul></div><div class="page-modal wx-share" id="wxShare"><a class="close" href="javascript:;"><i class="icon icon-close"></i></a><p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACJklEQVR42u3aQW4CMQwF0N7/0lOpq0oVw/8xVCJ5WVUwhbwsjB376yte189KXr9+rUdPXn/W/f++bGFgYHws47pd95tYe/f+yXvwQyoGBsYBjPtgeh8K5wdx/73RDwAGBgZGsInk+XaLGBgYGJOAm5epaykjBgYGxlpi176bsOefjIGBcQKjbQz8599v7G9gYGB8COMq11qgXDuOYlcYGBhbM5Jy9H6Qok0E10rlKBxjYGBsysjD4muD49oxPTwUDAyMrRntRXw7TpFsMQnKSXTFwMA4h7GWriXsaCuDCz4MDIwTGEXVW4bUCSO/sMPAwDiHUaRiMea13ca6IsfAwNiCkaSDdbdhCZCniUVFjoGBsQUjLziTJ9sxr7y1+SSsY2BgbM3IW4lrW8lbCO3RYGBgnMDIxybmW5yUxNEvBgYGxtaMNu1baye871AwMDD2ZrRJWD6Wkb8+aWpiYGCcw1gLsm0boN1cnp5iYGCcwJjE6TaMtkMVayNrGBgYOzEml2vt8EQeguuGKAYGxgGMtXJ0UqDmYTdqamJgYGzNaLPFemoj/oR2D0/6sRgYGBsx5qlee60/5z383cDAwNiUMQmUSdrXJpRtTYqBgXEOIwmybcBtS9a1gTMMDIzTGPOCcx6I86BfvI2BgXEYoyW1Ze2kqMbAwMCYlJp5srg26oGBgXEOox2AWLy3e+l1W23FwMD4WMb7hiSeXJAFCWVyrBgYGFszvgEJ3Z6clELYxAAAAABJRU5ErkJggg==" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç "></div><script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script><script>var BLOG={ROOT:"/",SHARE:!0,REWARD:!0};</script><script src="/js/main.min.js?v=1.7.2"></script><div class="search-panel" id="search-panel"><ul class="search-result" id="search-result"></ul></div><template id="search-tpl"><li class="item"><a href="{path}" class="waves-block waves-effect"><div class="title ellipsis" title="{title}">{title}</div><div class="flex-row flex-middle"><div class="tags ellipsis">{tags}</div><time class="flex-col time">{date}</time></div></a></li></template><script src="/js/search.min.js?v=1.7.2" async></script></body></html>